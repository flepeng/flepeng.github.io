

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2488174175014870" crossorigin="anonymous"></script><!-- google 广告 -->
  <meta name="google-site-verification" content="40lMg4eqLLbXoDcpN3h-cEnfmselbQ8tUzNvuC0IRIs" /><!-- google 站点认证 -->
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Lepeng">
  <meta name="keywords" content="">
  
    <meta name="description" content="11 【Teleport CSS功能】1.内置组件 Teleport什么是Teleport？——&lt;Teleport&gt; 是一个内置组件，它是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 React 的 Portal。 主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父">
<meta property="og:type" content="article">
<meta property="og:title" content="11 【Teleport CSS功能】">
<meta property="og:url" content="https://flepeng.github.io/021-frontend-04-Vue-01-course-vue3-11-%E3%80%90Teleport-CSS%E5%8A%9F%E8%83%BD%E3%80%91/index.html">
<meta property="og:site_name" content="Lepeng">
<meta property="og:description" content="11 【Teleport CSS功能】1.内置组件 Teleport什么是Teleport？——&lt;Teleport&gt; 是一个内置组件，它是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 React 的 Portal。 主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i0.hdslb.com/bfs/album/6d89d75f5e960646fe304978a6e2e6505584fbc3.png">
<meta property="og:image" content="https://i0.hdslb.com/bfs/album/082bb5d9af3f5adbfceeb7518839f56c16c55e7e.png">
<meta property="og:image" content="https://i0.hdslb.com/bfs/album/53be7cbbb9c6d4260f43d687866f55975383a6e0.png">
<meta property="og:image" content="https://i0.hdslb.com/bfs/album/f710b2c6538b3248841900e8476cac4b5fb90859.png">
<meta property="og:image" content="https://i0.hdslb.com/bfs/album/9ca75bb1aee6ca723ef3f328c8c82cdfbc895bd2.png">
<meta property="article:published_time" content="2023-07-31T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-03T10:25:30.349Z">
<meta property="article:author" content="Feng Lepeng">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i0.hdslb.com/bfs/album/6d89d75f5e960646fe304978a6e2e6505584fbc3.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>11 【Teleport CSS功能】 - Lepeng</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"flepeng.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"f3d259b9efd9ce8655c180fd01bf0045","google":{"measurement_id":"G-LFTE4C7W3W"},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?f3d259b9efd9ce8655c180fd01bf0045";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-LFTE4C7W3W", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-LFTE4C7W3W');
        });
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Lepeng 的 blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="11 【Teleport CSS功能】"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-08-01 00:00" pubdate>
          2023年8月1日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          38 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">11 【Teleport CSS功能】</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="11-【Teleport-CSS功能】"><a href="#11-【Teleport-CSS功能】" class="headerlink" title="11 【Teleport CSS功能】"></a>11 【Teleport CSS功能】</h1><h2 id="1-内置组件-Teleport"><a href="#1-内置组件-Teleport" class="headerlink" title="1.内置组件 Teleport"></a>1.内置组件 Teleport</h2><p>什么是Teleport？——<code>&lt;Teleport&gt;</code> 是一个内置组件，它是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 React 的 Portal。</p>
<p>主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父级style样式影响</p>
<ol>
<li>teleport 是内置组件，可以直接在模板中使用，无需注册。</li>
<li>可以被打包工具 tree-shake。所以它们只会在被使用的时候被引入。</li>
<li>需要直接主动访问(获取)它们的场景，也可以将它们显性导入。</li>
</ol>
<h3 id="1-1-基本用法"><a href="#1-1-基本用法" class="headerlink" title="1.1 基本用法"></a>1.1 基本用法</h3><p>有时我们可能会遇到这样的场景：一个组件模板的一部分在逻辑上从属于该组件，但从整个应用视图的角度来看，它在 DOM 中应该被渲染在整个 Vue 应用外部的其他地方。</p>
<p>这类场景最常见的例子就是全屏的模态框。理想情况下，我们希望触发模态框的按钮和模态框本身是在同一个组件中，因为它们都与组件的开关状态有关。但这意味着该模态框将与按钮一起渲染在应用 DOM 结构里很深的地方。这会导致该模态框的 CSS 布局代码很难写。</p>
<p>父组件<code>App.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;app&quot;&gt;<br>    &lt;h3&gt;我是App组件&lt;&#x2F;h3&gt;<br>    &lt;Child&gt;&lt;&#x2F;Child&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &#39;App&#39;,<br>&#125;;<br>&lt;&#x2F;script&gt;<br><br>&lt;script setup&gt;<br>import Child from &#39;.&#x2F;components&#x2F;Child.vue&#39;;<br>&lt;&#x2F;script&gt;<br><br>&lt;style&gt;<br>.app &#123;<br>  background-color: gray;<br>  padding: 10px;<br>  &#x2F;* position: relative; *&#x2F;<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p>子组件<code>Child.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;child&quot;&gt;<br>    &lt;h3&gt;我是Child组件&lt;&#x2F;h3&gt;<br>    &lt;button @click&#x3D;&quot;isShow &#x3D; true&quot;&gt;打开遮罩层&lt;&#x2F;button&gt;<br>    &lt;div class&#x3D;&quot;mask&quot; v-if&#x3D;&quot;isShow&quot;&gt;<br>      &lt;div class&#x3D;&quot;tip&quot;&gt;<br>        这是一个提示<br>        &lt;button @click&#x3D;&quot;isShow &#x3D; false&quot;&gt;关闭&lt;&#x2F;button&gt;<br>      &lt;&#x2F;div&gt;<br>    &lt;&#x2F;div&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &#39;Child&#39;,<br>&#125;;<br>&lt;&#x2F;script&gt;<br><br>&lt;script setup&gt;<br>let isShow &#x3D; $ref(false);<br>&lt;&#x2F;script&gt;<br><br>&lt;style scoped&gt;<br>.mask &#123;<br>  position: absolute;<br>  z-index: 999;<br>  width: 100%;<br>  height: 100%;<br>  top: 0;<br>  left: 0;<br>  background-color: rgba(0, 0, 0, 0.3);<br>&#125;<br><br>.tip &#123;<br>  position: absolute;<br>  top: 0;<br>  left: 0;<br>  right: 0;<br>  bottom: 0;<br>  margin: auto;<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p>现在来看没有问题</p>
<p><img src="https://i0.hdslb.com/bfs/album/6d89d75f5e960646fe304978a6e2e6505584fbc3.png" srcset="/img/loading.gif" lazyload alt="image-20220809195810727"></p>
<p>可是如果父元素加一个定位:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">position</span>: <span class="hljs-selector-tag">relative</span>;<br></code></pre></td></tr></table></figure>

<p><img src="https://i0.hdslb.com/bfs/album/082bb5d9af3f5adbfceeb7518839f56c16c55e7e.png" srcset="/img/loading.gif" lazyload alt="image-20220809195844153"></p>
<p>遮罩层就会变成这样</p>
<p>以后嵌套组件变多了，遮罩组件的父级组件存在定位语句是很正常的。如果能把这个组件渲染到<code>body</code>标签的子标签就好了。这时就可以使用<code>Teleport</code>组件。</p>
<ul>
<li><p>to - string  ：必传<br>挂载的目标，只能是父级标签。兄弟、子级都会报错。<br>挂载目标必须是有效的查询选择器或 HTMLElement</p>
</li>
<li><p>disabled - boolean  ：非必传</p>
<ul>
<li><p>是否禁用。true则挂载到目标节点下，false为当前位置。</p>
</li>
<li><p>动态变化 disabled 值时，只是位置会变动，内容并不会销毁重新渲染！</p>
</li>
</ul>
</li>
</ul>
<p><code>&lt;Teleport&gt;</code> 接收一个 <code>to</code> prop 来指定传送的目标。<code>to</code> 的值可以是一个 CSS 选择器字符串，也可以是一个 DOM 元素对象。这段代码的作用就是告诉 Vue “把以下模板片段<strong>传送到 <code>body</code></strong> 标签下”。</p>
<p>父组件<code>App.vue</code>中使用组件的位置改成这样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Teleport to&#x3D;&quot;body&quot;&gt;<br>  &lt;Child&gt;&lt;&#x2F;Child&gt;<br>&lt;&#x2F;Teleport&gt;<br></code></pre></td></tr></table></figure>

<p><img src="https://i0.hdslb.com/bfs/album/53be7cbbb9c6d4260f43d687866f55975383a6e0.png" srcset="/img/loading.gif" lazyload alt="image-20220809200202370"></p>
<p>可以发现这个组件确实被渲染到<code>body</code>标签下面了。</p>
<blockquote>
<p><strong>提示</strong></p>
<p><code>&lt;Teleport&gt;</code> 挂载时，传送的 <code>to</code> 目标必须已经存在于 DOM 中。理想情况下，这应该是整个 Vue 应用 DOM 树外部的一个元素。如果目标元素也是由 Vue 渲染的，你需要确保在挂载 <code>&lt;Teleport&gt;</code> 之前先挂载该元素。</p>
<p>以下teleport例子将会报错！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div class&#x3D;&quot;guazai&quot; v-if&#x3D;&quot;showData&quot;&gt;teleport目标元素&lt;&#x2F;div&gt;<br>&lt;div&gt;<br>&lt;teleport to&#x3D;&quot;.guazai&quot;&gt;demo&lt;&#x2F;teleport&gt;<br>&lt;&#x2F;div&gt;<br>&lt;script lang&#x3D;&#39;ts&#39;&gt;<br>import &#123; defineComponent &#125; from &#39;vue&#39;<br>export default defineComponent(&#123;<br>data()&#123;<br> return &#123;<br>   showData:false<br> &#125;<br>&#125;,<br>mounted() &#123;<br> setTimeout(() &#x3D;&gt; &#123;<br>   this.showData &#x3D; true<br> &#125;, 1000*1);<br>&#125;,<br>&#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
</blockquote>
<hr>
<blockquote>
<p>以下官方代码列举写法。但是前面说过 “ 挂载目标必须是有效的查询选择器或 HTMLElement ”</p>
<p>实际填h1 h2等原生标签、以及自定义的标签都是没问题的。以下应该是官方文档的一个纰漏。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 正确 --&gt;<br>&lt;teleport to&#x3D;&quot;#some-id&quot; &#x2F;&gt;<br>&lt;teleport to&#x3D;&quot;.some-class&quot; &#x2F;&gt;<br>&lt;teleport to&#x3D;&quot;[data-teleport]&quot; &#x2F;&gt;<br><br>&lt;!-- 错误 --&gt;<br>&lt;teleport to&#x3D;&quot;h1&quot; &#x2F;&gt;<br>&lt;teleport to&#x3D;&quot;some-string&quot; &#x2F;&gt;<br></code></pre></td></tr></table></figure>

<p><strong>关于样式: teleport</strong></p>
<p>teleport挂载的目标即使不在当前组件，scoped 内的样式在 teleport 中是生效的。</p>
<p>原因：scoped 生成的唯一属性会作用于 teleport 内的各元素</p>
</blockquote>
<h3 id="1-2-官方案例"><a href="#1-2-官方案例" class="headerlink" title="1.2 官方案例"></a>1.2 官方案例</h3><p>试想下面这样的 HTML 结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"outer"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Tooltips with Vue 3 Teleport<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">MyModal</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>接下来我们来看看 <code>modal-button</code> 的实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><br><span class="hljs-keyword">const</span> open = ref(<span class="hljs-literal">false</span>)<br>&lt;<span class="hljs-regexp">/script&gt;</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">&lt;template&gt;</span><br><span class="hljs-regexp">  &lt;button @click="open = true"&gt;Open Modal&lt;/</span>button&gt;<br><br>  &lt;div v-<span class="hljs-keyword">if</span>=<span class="hljs-string">"open"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"modal"</span>&gt;<br>    &lt;p&gt;Hello <span class="hljs-keyword">from</span> the modal!&lt;<span class="hljs-regexp">/p&gt;</span><br><span class="hljs-regexp">    &lt;button @click="open = false"&gt;Close&lt;/</span>button&gt;<br>  &lt;<span class="hljs-regexp">/div&gt;</span><br><span class="hljs-regexp">&lt;/</span>template&gt;<br><br>&lt;style scoped&gt;<br>.modal &#123;<br>  position: fixed;<br>  z-index: <span class="hljs-number">999</span>;<br>  top: <span class="hljs-number">20</span>%;<br>  left: <span class="hljs-number">50</span>%;<br>  width: <span class="hljs-number">300</span>px;<br>  margin-left: <span class="hljs-number">-150</span>px;<br>&#125;<br>&lt;<span class="hljs-regexp">/style&gt;</span><br></code></pre></td></tr></table></figure>

<p>这个组件中有一个 <code>&lt;button&gt;</code> 按钮来触发打开模态框，和一个 class 名为 <code>.modal</code> 的 <code>&lt;div&gt;</code>，它包含了模态框的内容和一个用来关闭的按钮。</p>
<p>当在初始 HTML 结构中使用这个组件时，会有一些潜在的问题：</p>
<ul>
<li><code>position: fixed</code> 能够相对于浏览器窗口放置有一个条件，那就是不能有任何祖先元素设置了 <code>transform</code>、<code>perspective</code> 或者 <code>filter</code> 样式属性。也就是说如果我们想要用 CSS <code>transform</code> 为祖先节点 <code>&lt;div class=&quot;outer&quot;&gt;</code> 设置动画，就会不小心破坏模态框的布局！</li>
<li>这个模态框的 <code>z-index</code> 受限于它的容器元素。如果有其他元素与 <code>&lt;div class=&quot;outer&quot;&gt;</code> 重叠并有更高的 <code>z-index</code>，则它会覆盖住我们的模态框。</li>
</ul>
<p><code>&lt;Teleport&gt;</code> 提供了一个更简单的方式来解决此类问题，让我们不需要再顾虑 DOM 结构的问题。让我们用 <code>&lt;Teleport&gt;</code> 改写一下 <code>&lt;MyModal&gt;</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;button @click&#x3D;&quot;open &#x3D; true&quot;&gt;Open Modal&lt;&#x2F;button&gt;<br><br>&lt;Teleport to&#x3D;&quot;body&quot;&gt;<br>  &lt;div v-if&#x3D;&quot;open&quot; class&#x3D;&quot;modal&quot;&gt;<br>    &lt;p&gt;Hello from the modal!&lt;&#x2F;p&gt;<br>    &lt;button @click&#x3D;&quot;open &#x3D; false&quot;&gt;Close&lt;&#x2F;button&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;Teleport&gt;<br></code></pre></td></tr></table></figure>

<p><code>&lt;Teleport&gt;</code> 接收一个 <code>to</code> prop 来指定传送的目标。<code>to</code> 的值可以是一个 CSS 选择器字符串，也可以是一个 DOM 元素对象。这段代码的作用就是告诉 Vue “把以下模板片段<strong>传送到 <code>body</code></strong> 标签下”。</p>
<p>我们也可以将 <code>&lt;Teleport&gt;</code> 和 <a href="https://staging-cn.vuejs.org/guide/built-ins/transition.html" target="_blank" rel="noopener">&#96;&#96;</a> 结合使用来创建一个带动画的模态框。你可以看看<a href="https://staging-cn.vuejs.org/examples/#modal" target="_blank" rel="noopener">这个示例</a>。</p>
<h3 id="1-3-禁用-Teleport"><a href="#1-3-禁用-Teleport" class="headerlink" title="1.3 禁用 Teleport"></a>1.3 禁用 Teleport</h3><p>在某些场景下可能需要视情况禁用 <code>&lt;Teleport&gt;</code>。举例来说，我们想要在桌面端将一个组件当做浮层来渲染，但在移动端则当作行内组件。我们可以通过对 <code>&lt;Teleport&gt;</code> 动态地传入一个 <code>disabled</code> prop 来处理这两种不同情况。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Teleport :disabled&#x3D;&quot;isMobile&quot;&gt;<br>  ...<br>&lt;&#x2F;Teleport&gt;<br></code></pre></td></tr></table></figure>

<p>这里的 <code>isMobile</code> 状态可以根据 CSS media query 的不同结果动态地更新。</p>
<h3 id="1-4-多个-Teleport-共享目标"><a href="#1-4-多个-Teleport-共享目标" class="headerlink" title="1.4 多个 Teleport 共享目标"></a>1.4 多个 Teleport 共享目标</h3><p>一个可重用的模态框组件可能同时存在多个实例。对于此类场景，多个 <code>&lt;Teleport&gt;</code> 组件可以将其内容挂载在同一个目标元素上，而顺序就是简单的顺次追加，后挂载的将排在目标元素下更后面的位置上。</p>
<p>比如下面这样的用例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;Teleport to&#x3D;&quot;#modals&quot;&gt;<br>  &lt;div&gt;A&lt;&#x2F;div&gt;<br>&lt;&#x2F;Teleport&gt;<br>&lt;Teleport to&#x3D;&quot;#modals&quot;&gt;<br>  &lt;div&gt;B&lt;&#x2F;div&gt;<br>&lt;&#x2F;Teleport&gt;<br></code></pre></td></tr></table></figure>

<p>渲染的结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div id&#x3D;&quot;modals&quot;&gt;<br>  &lt;div&gt;A&lt;&#x2F;div&gt;<br>  &lt;div&gt;B&lt;&#x2F;div&gt;<br>&lt;&#x2F;div&gt;<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://staging-cn.vuejs.org/api/built-in-components.html#teleport" target="_blank" rel="noopener">&#96;&#96; API 参考</a></li>
<li><a href="https://staging-cn.vuejs.org/guide/scaling-up/ssr.html#teleports" target="_blank" rel="noopener">在 SSR 中处理 Teleports</a></li>
</ul>
<h2 id="2-CSS功能"><a href="#2-CSS功能" class="headerlink" title="2.CSS功能"></a>2.CSS功能</h2><h3 id="2-1-CSS-Modules"><a href="#2-1-CSS-Modules" class="headerlink" title="2.1 CSS Modules#"></a>2.1 CSS Modules<a href="https://staging-cn.vuejs.org/api/sfc-css-features.html#css-modules" target="_blank" rel="noopener">#</a></h3><p>一个 <code>&lt;style module&gt;</code> 标签会被编译为 <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener">CSS Modules</a> 并且将生成的 CSS class 作为 <code>$style</code> 对象暴露给组件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;p :class&#x3D;&quot;$style.red&quot;&gt;This should be red&lt;&#x2F;p&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;style module&gt;<br>.red &#123;<br>  color: red;<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p>得出的 class 将被哈希化以避免冲突，实现了同样的将 CSS 仅作用于当前组件的效果。</p>
<p>参考 <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener">CSS Modules spec</a> 以查看更多详情，例如 <a href="https://github.com/css-modules/css-modules#exceptions" target="_blank" rel="noopener">global exceptions</a> 和 <a href="https://github.com/css-modules/css-modules#composition" target="_blank" rel="noopener">composition</a>。</p>
<h4 id="2-1-1-自定义注入名称"><a href="#2-1-1-自定义注入名称" class="headerlink" title="2.1.1 自定义注入名称#"></a>2.1.1 自定义注入名称<a href="https://staging-cn.vuejs.org/api/sfc-css-features.html#custom-inject-name" target="_blank" rel="noopener">#</a></h4><p>你可以通过给 <code>module</code> attribute 一个值来自定义注入 class 对象的属性名：</p>
<p>自定义注入名称（多个可以用数组）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div :class&#x3D;&quot;[zs.red,zs.border]&quot;&gt;<br>        是个弟弟<br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br> <br>&lt;style module&#x3D;&quot;zs&quot;&gt;<br>.red &#123;<br>    color: red;<br>    font-size: 20px;<br>&#125;<br>.border&#123;<br>    border: 1px solid #ccc;<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="与组合式-API-一同使用"><a href="#与组合式-API-一同使用" class="headerlink" title="与组合式 API 一同使用#"></a>与组合式 API 一同使用<a href="https://staging-cn.vuejs.org/api/sfc-css-features.html#usage-with-composition-api" target="_blank" rel="noopener">#</a></h4><p>可以通过 <code>useCssModule</code> API 在 <code>setup()</code> 和 <code>&lt;script setup&gt;</code> 中访问注入的 class。对于使用了自定义注入名称的 <code>&lt;style module&gt;</code> 块，<code>useCssModule</code> 接收一个匹配的 <code>module</code> attribute 值作为第一个参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div :class&#x3D;&quot;[zs.red,zs.border]&quot;&gt;<br>        是个弟弟<br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br> <br> <br>&lt;script setup lang&#x3D;&quot;ts&quot;&gt;<br>import &#123; useCssModule &#125; from &#39;vue&#39;<br> &#x2F;&#x2F; 在 setup() 作用域中...<br>&#x2F;&#x2F; 默认情况下, 返回 &lt;style module&gt; 的 class<br>useCssModule()<br>    <br>&#x2F;&#x2F; 具名情况下, 返回 &lt;style module&#x3D;&quot;classes&quot;&gt; 的 class<br>const css &#x3D; useCssModule(&#39;zs&#39;)<br>&lt;&#x2F;script&gt;<br> <br>&lt;style module&#x3D;&quot;zs&quot;&gt;<br>.red &#123;<br>    color: red;<br>    font-size: 20px;<br>&#125;<br>.border&#123;<br>    border: 1px solid #ccc;<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<h3 id="2-2-CSS-中的-v-bind"><a href="#2-2-CSS-中的-v-bind" class="headerlink" title="2.2 CSS 中的 v-bind()#"></a>2.2 CSS 中的 <code>v-bind()</code><a href="https://staging-cn.vuejs.org/api/sfc-css-features.html#v-bind-in-css" target="_blank" rel="noopener">#</a></h3><p>单文件组件的 <code>&lt;style&gt;</code> 标签支持使用 <code>v-bind</code> CSS 函数将 CSS 的值链接到动态的组件状态：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123;ref&#125; from &#39;vue&#39;<br>let colorData &#x3D; ref(&#39;red&#39;)<br>&lt;&#x2F;script&gt;<br> <br>&lt;style&gt;<br>.testClass2&#123;<br>  color: v-bind(colorData);<br>&#125;<br>&lt;&#x2F;style&gt;<br>&lt;style scoped&gt;<br>.testClass&#123;<br>  color: v-bind(colorData);<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p>这个语法同样也适用于 <a href="https://staging-cn.vuejs.org/api/sfc-script-setup.html" target="_blank" rel="noopener">&#96;&#96;</a>，且支持 JavaScript 表达式 (需要用引号包裹起来)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>const theme &#x3D; &#123;<br>  color: &#39;red&#39;<br>&#125;<br>&lt;&#x2F;script&gt;<br><br>&lt;template&gt;<br>  &lt;p&gt;hello&lt;&#x2F;p&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;style scoped&gt;<br>p &#123;<br>  color: v-bind(&#39;theme.color&#39;);<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p>实际的值会被编译成哈希化的 CSS 自定义属性，因此 CSS 本身仍然是静态的。自定义属性会通过内联样式的方式应用到组件的根元素上，并且在源值变更的时候响应式地更新。</p>
<h3 id="2-3-组件作用域-CSS"><a href="#2-3-组件作用域-CSS" class="headerlink" title="2.3 组件作用域 CSS"></a>2.3 组件作用域 CSS</h3><h4 id="2-3-1-lt-style-scoped-gt"><a href="#2-3-1-lt-style-scoped-gt" class="headerlink" title="2.3.1 &lt;style scoped&gt;"></a>2.3.1 <code>&lt;style scoped&gt;</code></h4><p>当 <code>&lt;style&gt;</code> 标签带有 <code>scoped</code> attribute 的时候，它的 CSS 只会影响当前组件的元素，和 Shadow DOM 中的样式封装类似。使用时有一些注意事项，不过好处是不需要任何的 polyfill。它的实现方式是通过 PostCSS 将以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;style scoped&gt;<br>.example &#123;<br>  color: red;<br>&#125;<br>&lt;&#x2F;style&gt;<br><br>&lt;template&gt;<br>  &lt;div class&#x3D;&quot;example&quot;&gt;hi&lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br></code></pre></td></tr></table></figure>

<p>转换为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;style&gt;<br>.example[data-v-f3f3eg9] &#123;<br>  color: red;<br>&#125;<br>&lt;&#x2F;style&gt;<br><br>&lt;template&gt;<br>  &lt;div class&#x3D;&quot;example&quot; data-v-f3f3eg9&gt;hi&lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br></code></pre></td></tr></table></figure>

<p><strong>子组件的根元素<a href="https://staging-cn.vuejs.org/api/sfc-css-features.html#child-component-root-elements" target="_blank" rel="noopener">#</a></strong></p>
<p>使用 <code>scoped</code> 后，父组件的样式将不会渗透到子组件中。不过，子组件的根节点会同时被父组件的作用域样式和子组件的作用域样式影响。这样设计是为了让父组件可以从布局的角度出发，调整其子组件根元素的样式。</p>
<h4 id="2-3-1-深度选择器"><a href="#2-3-1-深度选择器" class="headerlink" title="2.3.1 深度选择器"></a>2.3.1 深度选择器</h4><p> 处于 scoped 样式中的选择器如果想要做更“深度”的选择，也即：影响到子组件，可以使用 :deep() 这个伪类</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br><span class="hljs-selector-class">.a</span> <span class="hljs-selector-pseudo">:deep(.b)</span> &#123;<br>  <span class="hljs-comment">/* ... */</span><br>&#125;<br>&lt;/style&gt;<br> <br>// 编译后<br><span class="hljs-selector-class">.a</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> <span class="hljs-selector-class">.b</span> &#123;<br>  <span class="hljs-comment">/* ... */</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><em><strong>通过 v-html 创建的 DOM 内容不会被作用域样式影响，但你仍然可以使用深度选择器来设置其样式。</strong></em></li>
<li><strong>并且我们有时会有需要修改引入的外部组件库的样式的需求，此时就需要使用深度选择器，或者直接<code>&lt;style&gt;</code>不加scoped，作用于全局范围。</strong></li>
</ul>
<h4 id="2-3-3-插槽选择器"><a href="#2-3-3-插槽选择器" class="headerlink" title="2.3.3 插槽选择器"></a>2.3.3 插槽选择器</h4><p>默认情况下，作用域样式不会影响到 <code>&lt;slot/&gt;</code> 渲染出来的内容，因为它们被认为是父组件所持有并传递进来的。使用 <code>:slotted</code> 伪类以明确地将插槽内容作为选择器的目标：</p>
<p><code>A.vue</code></p>
<p>在A组件修改class a 的颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        我是插槽<br>        &lt;slot&gt;&lt;&#x2F;slot&gt;<br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br> <br>&lt;script&gt;<br>export default &#123;&#125;<br>&lt;&#x2F;script&gt;<br> <br>&lt;style scoped&gt;<br>.a&#123;<br>    color:red<br>&#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p><code>App.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;A&gt;<br>            &lt;div class&#x3D;&quot;a&quot;&gt;私人定制div&lt;&#x2F;div&gt;<br>        &lt;&#x2F;A&gt;<br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br> <br>&lt;script setup&gt;<br>import A from &quot;@&#x2F;components&#x2F;A.vue&quot;<br>&lt;&#x2F;script&gt;<br> <br> <br>&lt;style lang&#x3D;&quot;less&quot; scoped&gt;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p><img src="https://i0.hdslb.com/bfs/album/f710b2c6538b3248841900e8476cac4b5fb90859.png" srcset="/img/loading.gif" lazyload alt="image-20220810215440054"></p>
<p> 默认情况下，作用域样式不会影响到 <code>&lt;slot/&gt;</code> 渲染出来的内容，因为它们被认为是父组件所持有并传递进来的。</p>
<p>解决方案 slotted</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br> <span class="hljs-selector-pseudo">:slotted(.a)</span> &#123;<br>    <span class="hljs-attribute">color</span>:red<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p> <img src="https://i0.hdslb.com/bfs/album/9ca75bb1aee6ca723ef3f328c8c82cdfbc895bd2.png" srcset="/img/loading.gif" lazyload alt="image-20220810215539547"></p>
<h4 id="2-3-4-全局选择器"><a href="#2-3-4-全局选择器" class="headerlink" title="2.3.4 全局选择器"></a>2.3.4 全局选择器</h4><p>在之前我们想加入全局 样式 通常都是新建一个style 标签 不加scoped 现在有更优雅的解决方案</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span>&gt;<br> <span class="hljs-selector-tag">div</span>&#123;<br>     <span class="hljs-attribute">color</span>:red<br> &#125;<br>&lt;/style&gt;<br> <br>&lt;style lang="less" scoped&gt;<br> <br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>如果想让其中一个样式规则应用到全局，比起另外创建一个 <code>&lt;style&gt;</code>，可以使用 <code>:global</code> 伪类来实现 (看下面的代码)：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;style lang="less" scoped&gt;<br><span class="hljs-selector-pseudo">:global(div)</span>&#123;<br>    <span class="hljs-attribute">color</span>:red<br>&#125;<br>&lt;/style&gt;<br>一定要写在<span class="hljs-selector-tag">scoped</span>里面<br></code></pre></td></tr></table></figure>

<p>效果等同于上面 </p>
<h4 id="2-3-5-混合使用局部与全局样式"><a href="#2-3-5-混合使用局部与全局样式" class="headerlink" title="2.3.5 混合使用局部与全局样式"></a>2.3.5 混合使用局部与全局样式</h4><p>你也可以在同一个组件中同时包含作用域样式和非作用域样式：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span>&gt;<br><span class="hljs-comment">/* 全局样式 */</span><br>&lt;/style&gt;<br><br>&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br><span class="hljs-comment">/* 局部样式 */</span><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="2-3-6-注意"><a href="#2-3-6-注意" class="headerlink" title="2.3.6 注意"></a>2.3.6 注意</h4><ul>
<li><p><strong>Scoped 样式不能代替 class</strong>。由于浏览器渲染各种各样 CSS 选择器的方式，<code>p { color: red }</code> 结合作用域样式使用时 (即当与 attribute 选择器组合的时候) 会慢很多倍。如果你使用 class 或者 id 来替代，例如 <code>.example { color: red }</code>，那你几乎就可以避免性能的损失。</p>
</li>
<li><p><strong>在递归组件中小心使用后代选择器!</strong> 对于一个使用了 <code>.a .b</code> 选择器的样式规则来说，如果匹配到 <code>.a</code> 的元素包含了一个递归的子组件，那么所有的在那个子组件中的 <code>.b</code> 都会匹配到这条样式规则。</p>
</li>
</ul>
<h3 id="2-4-组件修改子组件样式"><a href="#2-4-组件修改子组件样式" class="headerlink" title="2.4 组件修改子组件样式"></a>2.4 组件修改子组件样式</h3><p>首先抛出一个最暴力的方案，但这存在影响其他同名样式的风险。当你意识不到哪出问题的时候，就会让人抓狂。（不推荐的方案！）</p>
<p>涉及到异步组件加载了对应全局样式，又访问了其他页面，选择器相同时则会出现样式不以你预想的情况出现！</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">// 全局样式<br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.customClassName</span>&#123;</span><br><span class="css">    <span class="hljs-selector-tag">color</span><span class="hljs-selector-pseudo">:red</span>;</span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>vue2方案：</p>
<p>在<code>&lt;style scoped&gt;</code>内使用<code>&gt;&gt;&gt;</code>或<code>/deep/</code>，vue2时期我一直统一用的是<code>/deep/ </code>，避免<code>&gt;&gt;&gt;</code>无法解析的问题。</p>
<p>有些像 Sass 之类的预处理器无法正确解析 <code>&gt;&gt;&gt;</code>。这种情况下你可以使用 <code>/deep/</code> 或<code> ::v-deep</code> 操作符取而代之——两者都是<code>&gt;&gt;&gt;</code>的别名，同样可以正常工作。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br><span class="hljs-selector-class">.currComponent</span> &gt;&gt;&gt; <span class="hljs-selector-class">.el-dialog</span> <span class="hljs-selector-class">.el-dialog__body</span>&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br>&lt;/style&gt;<br> <br>// 或者<br>&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br>.currComponent /deep/ .el-dialog .el-dialog__body&#123;<br>  <span class="hljs-selector-tag">padding</span>: 10<span class="hljs-selector-tag">px</span>;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>vue3 推荐方案：</p>
<p>vue2的写法在vue3 仍然可以使用，但vue3 文档只写了<code> :deep()</code> 这一个API案例，为了统一风格和提高规范，建议按照v3文档 使用·<code>:deep() </code>。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br><span class="hljs-selector-class">.currConponentName</span> <span class="hljs-selector-pseudo">:deep(.el-dialog</span> <span class="hljs-selector-class">.el-dialog__body</span>)&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br>&lt;/style&gt;<br> <br>&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br>.currConponentName /deep/ .el-dialog .el-dialog__body&#123;<br>  <span class="hljs-selector-tag">padding</span>: 10<span class="hljs-selector-tag">px</span>;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>

<p>无论<code>&gt;&gt;&gt; /deep/</code>还是<code> :deep()</code> 都是写在<code> .el-dialog .el-dialog__body</code>前。此处进行原因分析、解释：</p>
<ol>
<li>首先 scoped 特性会使组件自身的所有元素增加唯一标识属性(例如： <code>data-v-7d766012</code>)，并且编译后CSS选择器也会有这段唯一标识。注意！是组件自身的元素。不包括子组件、父组件！</li>
<li>特例：子组件的根节点会同时被子组件和父组件的样式影响！这是为了方便父组件对子组件进行布局！但是仅限于根组件，如果子组件没有根节点，如VUE3的片段特性（多根节点），则无效。</li>
<li><strong>重点来了：在deep前的选择器，是会带上唯一标识的，deep后面的选择器是不会带上这唯一标识！如果带上了父组件的唯一标识，自然匹配不上子组件对应的元素属性，就会不生效。</strong></li>
</ol>
<p>代码案例解释：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">style</span> <span class="hljs-selector-tag">scoped</span>&gt;<br><span class="hljs-selector-class">.a</span> <span class="hljs-selector-pseudo">:deep(.b</span> <span class="hljs-selector-class">.c</span>) &#123;<br>  <span class="hljs-comment">/* ... */</span><br>&#125;<br>&lt;/style&gt;<br> <br>// 编译结果如下<br><span class="hljs-selector-class">.a</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> <span class="hljs-selector-class">.b</span> <span class="hljs-selector-class">.c</span>&#123;<br>  <span class="hljs-comment">/* ... */</span><br>&#125;<br> <br><span class="hljs-selector-class">.a</span>是当前组件的类名，<span class="hljs-selector-tag">data-v-f3f3eg9</span> 是当前组件的唯一标识， <span class="hljs-selector-class">.b</span> <span class="hljs-selector-class">.c</span>是你想影响的子组件的对应类名的样式！<br>这时候当前组件的<span class="hljs-selector-class">.a</span>自然匹配的上， <span class="hljs-selector-class">.b</span> <span class="hljs-selector-class">.c</span> 由于不存在父组件的唯一标识，自然也就匹配的上子组件对应的<span class="hljs-selector-class">.b</span> <span class="hljs-selector-class">.c</span><br> <br> <br>！！如果是 <span class="hljs-selector-class">.a</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> <span class="hljs-selector-class">.b</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> <span class="hljs-selector-class">.c</span><br>由于是唯一标识， <span class="hljs-selector-class">.b</span>自然不可能是 <span class="hljs-selector-tag">data-v-f3f3eg9</span><br> <br>此时这就匹配不到子元素对应的class='b'，自然也无法将样式作用于 class='c' ！！<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Vue/" class="category-chain-item">Vue</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Vue/" class="print-no-link">#Vue</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>11 【Teleport CSS功能】</div>
      <div>https://flepeng.github.io/021-frontend-04-Vue-01-course-vue3-11-【Teleport-CSS功能】/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Lepeng</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年8月1日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/021-frontend-04-Vue-01-course-vue3-10-%E3%80%90%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6-%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0-hooks-%E3%80%91/" title="10 【异步组件 组合式函数(hooks)】">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">10 【异步组件 组合式函数(hooks)】</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/021-frontend-04-Vue-01-course-vue3-12-%E3%80%90%E5%85%B6%E5%AE%83%E7%BB%84%E5%90%88%E5%BC%8FAPI%E3%80%91/" title="12 【其它组合式API】">
                        <span class="hidden-mobile">12 【其它组合式API】</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"flepeng/hexo-blog-comment","repo-id":"R_kgDOL0qaig","category":"Announcements","category-id":"DIC_kwDOL0qais4CfBIv","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
