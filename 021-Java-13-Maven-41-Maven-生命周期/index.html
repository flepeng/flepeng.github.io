

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2488174175014870" crossorigin="anonymous"></script><!-- google 广告 -->
  <meta name="google-site-verification" content="40lMg4eqLLbXoDcpN3h-cEnfmselbQ8tUzNvuC0IRIs" /><!-- google 站点认证 -->
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Lepeng">
  <meta name="keywords" content="">
  
    <meta name="description" content="声明周期(Lifecycle)Maven 中有一个专业术语：声明周期（Lifecycle），它在官方文档中的名称是：**Build Lifecycle(构建生命周期)**。 我们在日常工作中，经常遇到的项目生命周期包括 编译、测试、打包、部署等，不同项目的生命周期或多或少会一些差异。 Maven 对构建的过程进行的抽象和统一，提出了 Maven生命周期 这一个抽象的概念，它的作用是定义一条执行流程">
<meta property="og:type" content="article">
<meta property="og:title" content="41-Maven 生命周期">
<meta property="og:url" content="https://flepeng.github.io/021-Java-13-Maven-41-Maven-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/index.html">
<meta property="og:site_name" content="Lepeng">
<meta property="og:description" content="声明周期(Lifecycle)Maven 中有一个专业术语：声明周期（Lifecycle），它在官方文档中的名称是：**Build Lifecycle(构建生命周期)**。 我们在日常工作中，经常遇到的项目生命周期包括 编译、测试、打包、部署等，不同项目的生命周期或多或少会一些差异。 Maven 对构建的过程进行的抽象和统一，提出了 Maven生命周期 这一个抽象的概念，它的作用是定义一条执行流程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img2022.cnblogs.com/blog/2329252/202209/2329252-20220907151349088-1650030210.png">
<meta property="article:published_time" content="2021-04-21T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-03T10:25:30.310Z">
<meta property="article:author" content="Feng Lepeng">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Maven">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img2022.cnblogs.com/blog/2329252/202209/2329252-20220907151349088-1650030210.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>41-Maven 生命周期 - Lepeng</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"flepeng.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"f3d259b9efd9ce8655c180fd01bf0045","google":{"measurement_id":"G-LFTE4C7W3W"},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?f3d259b9efd9ce8655c180fd01bf0045";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-LFTE4C7W3W", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-LFTE4C7W3W');
        });
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Lepeng 的 blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="41-Maven 生命周期"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-04-22 00:00" pubdate>
          2021年4月22日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.9k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          25 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">41-Maven 生命周期</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="声明周期-Lifecycle"><a href="#声明周期-Lifecycle" class="headerlink" title="声明周期(Lifecycle)"></a>声明周期(Lifecycle)</h2><p>Maven 中有一个专业术语：声明周期（<strong>Lifecycle</strong>），它在官方文档中的名称是：**Build Lifecycle(构建生命周期)**。</p>
<p>我们在日常工作中，经常遇到的项目生命周期包括 编译、测试、打包、部署等，不同项目的生命周期或多或少会一些差异。</p>
<p>Maven 对构建的过程进行的抽象和统一，提出了 <code>Maven生命周期</code> 这一个抽象的概念，它的作用是定义一条执行流程，而不会完成实际的工作，在每个流程节点中的工作都会交给具体实例对象去完成。这个执行的流程中包含了项目的清理、初始化、编译、测试、打包、集成测试、验证、部署、站点生成等步骤，几乎覆盖了项目构建中的所有流程节点，我们可以按需选择其中的一部分步骤生成自己的项目包。</p>
<p>Maven 内置了三套相互独立的生命周期（依据不同的目的，定义了三种处理项目的过程）：</p>
<ul>
<li><code>default(or build) lifecycle</code> 负责项目的构建、发布，很常用。</li>
<li><code>clean lifecycle</code> 负责清理项目，在进行真正的构建之前进行一些清理工作，比较常用。</li>
<li><code>site lifecycle</code> 负责生成项目站点，即API文档信息网站，不常用。</li>
</ul>
<h2 id="生命周期是由阶段组成的"><a href="#生命周期是由阶段组成的" class="headerlink" title="生命周期是由阶段组成的"></a>生命周期是由阶段组成的</h2><blockquote>
<p>Each of these build lifecycles is defined by a different list of build phases, wherein a build phase represents a stage in the lifecycle.</p>
</blockquote>
<blockquote>
<p>每个声明周期由若干不同的阶段（Phase）组成。阶段代表了生命周期的特殊步骤。</p>
</blockquote>
<p>例如，default lifecycle 由下列阶段组成（这里列出了部分阶段，完整阶段下文会介绍）。</p>
<ul>
<li><code>validate</code> 验证项目是正确的，所有必要的信息都是可用的。</li>
<li><code>compile</code> 编译项目源代码。</li>
<li><code>test</code> 使用单元测试框架测试编译后的源代码。</li>
<li><code>package</code> 获取已编译的代码，并将其打包为可发行的格式，例如JAR。</li>
<li><code>verify</code>运行任意的检查来验证项目包有效且达到质量标准。</li>
<li><code>install</code>将包安装到本地仓库，供本地项目使用。</li>
<li><code>deploy</code>将包发布到远程仓库（<strong>remote repository</strong>），方便其他开发人员和项目共享。</li>
</ul>
<p>注意：</p>
<ul>
<li><p><strong>生命周期阶段是按（在生命周期中定义的）顺序执行的</strong>。例如，在执行package阶段时，会先按顺序执行validate、compile、test阶段，最后执行package阶段。</p>
</li>
<li><p><strong>没有绑定插件目标的阶段，在生命周期中是不会被调用的。</strong></p>
</li>
</ul>
<h2 id="阶段是由插件目标组成的"><a href="#阶段是由插件目标组成的" class="headerlink" title="阶段是由插件目标组成的"></a>阶段是由插件目标组成的</h2><blockquote>
<p>However, even though a build phase is responsible for a specific step in the build lifecycle, the manner in which it carries out those responsibilities may vary. And this is done by declaring the plugin goals bound to those build phases.</p>
</blockquote>
<blockquote>
<p>阶段对生命周期的特殊步骤负责，它履行职责的方式可能不同，取决于绑定到阶段的插件目标。简而言之，阶段的执行依赖于插件目标。</p>
</blockquote>
<p>例如：compile阶段履行编译职责，依赖于插件目标 <code>compiler:compile</code>，这里compiler代表了插件<code>maven-compiler-plugin</code>（本质是maven-compiler-plugin-3.1.jar），compile表示（插件）目标（本质上应该是要选择类中的一个方法执行，具体还有看源码，主要就是选择一个模块执行）。</p>
<blockquote>
<p>A plugin goal represents a specific task (finer than a build phase) which contributes to the building and managing of a project. It may be bound to zero or more build phases. A goal not bound to any build phase could be executed outside of the build lifecycle by direct invocation.  </p>
<p>Moreover, if a goal is bound to one or more build phases, that goal will be called in all those phases.  </p>
<p>Furthermore, a build phase can also have zero or more goals bound to it. If a build phase has no goals bound to it, that build phase will not execute. But if it has one or more goals bound to it, it will execute all those goals.</p>
</blockquote>
<p>内容较多，挑选主要内容翻译。</p>
<ol>
<li><p>插件目标代表明确的任务。</p>
<p>例如：<code>jar:jar</code>把编译的二进制class文件打包，格式JAR；<code>install:install</code>把打包文件安装到本地仓库等。</p>
</li>
<li><p>一个生命周期阶段可以绑定零或多个插件目标。</p>
</li>
<li><p>某生命周期阶段没有绑定插件目标（或者说绑定零个插件目标），它将不会执行。绑定多个按绑定的先后顺序执行。例如</p>
<ul>
<li><p>打包方式为<code>pom</code>时，生命周期阶段<code>package</code>没有绑定任何插件目标，因此不会执行。打包方式为pom时主要用于父项目，统一管理依赖。不进行打包，也是可以理解的。</p>
</li>
<li><p>打包方式为<code>maven-plugin</code>时，生命周期阶段<code>package</code>绑定了多个（实际为2个）插件目标， <code>jar:jar</code> 和 <code>plugin:addPluginArtifactMetadata</code>。插件按绑定顺序执行。</p>
</li>
</ul>
</li>
<li><p>一个插件目标可以绑定到零个或者多个生命周期阶段上。如果某插件目标没有绑定到生命周期阶段上（即绑定到零个生命周期阶段），它执行任务的方式是 <strong>直接调用</strong>。</p>
<p>例如：</p>
<ul>
<li><p>插件目标<code>install:install</code>，它被绑定到了<code>install</code>阶段，在命令行中输入<code>mvn install</code>，首先执行default lifecycle 中install之前的所有生命周期阶段，最后执行install阶段，此时，插件目标<code>install:install</code>执行任务。假设，还有其他插件目标绑定到install阶段，也会被调用来执行相应的任务。</p>
</li>
<li><p>有些插件目标，如 <code>tomcat7:run</code> 没有绑定到任务生命周期阶段，它想要执行任务，可以通过直接调用 <code>direct invocation</code>，在命令行中输入<code>mvn tomcat7:run</code>，就可以执行任务。</p>
</li>
<li><p>另外，在命令行输入<code>install:install</code>，只会执行安装包到本地仓库的任务。如果，<code>install</code>阶段之前的所有生命周期阶段没有执行，此时会报错，因为没有install之前的阶段履行职责，可能根本不存在jar包。</p>
</li>
</ul>
<p><strong>简言之，插件目标执行任务，可以直接调用。也可以由阶段调用。</strong></p>
</li>
</ol>
<h2 id="生命周期及履行职责"><a href="#生命周期及履行职责" class="headerlink" title="生命周期及履行职责"></a>生命周期及履行职责</h2><p>下面列出了default、clean和site生命周期的所有阶段，它们按照在下表中定义的顺序执行的。当执行某个阶段，先执行其之前的所有阶段，然后执行该阶段。<strong>用连字符命名的阶段(<code>pre-*</code>、<code>post-_</code> 或 <code>process-_</code> )通常不会直接从命令行调用。它们履行的职责主要是生成一些中间产物等等</strong></p>
<h3 id="Clean-Lifecycle-（clean-经常用）"><a href="#Clean-Lifecycle-（clean-经常用）" class="headerlink" title="Clean Lifecycle （clean 经常用）"></a>Clean Lifecycle （clean 经常用）</h3><table>
<thead>
<tr>
<th align="left">Phase</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>pre-clean</code></td>
<td align="left">执行清理前需要完成的工作</td>
</tr>
<tr>
<td align="left"><code>clean</code> （经常用）</td>
<td align="left">清理上一次构建生成的文件</td>
</tr>
<tr>
<td align="left"><code>post-clean</code></td>
<td align="left">执行清理后需要完成的工作</td>
</tr>
</tbody></table>
<h3 id="Default-Lifecycle-（很很很常用）"><a href="#Default-Lifecycle-（很很很常用）" class="headerlink" title="Default Lifecycle （很很很常用）"></a>Default Lifecycle （很很很常用）</h3><table>
<thead>
<tr>
<th align="left">Phase</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>validate</code>（校验）</td>
<td align="left">校验项目是否正确并且所有必要的信息可以完成项目的构建过程。</td>
</tr>
<tr>
<td align="left"><code>initialize</code>（初始化）</td>
<td align="left">初始化构建状态，比如设置属性值。</td>
</tr>
<tr>
<td align="left"><code>generate-sources</code>（生成源代码）</td>
<td align="left">生成包含在编译阶段中的任何源代码。</td>
</tr>
<tr>
<td align="left"><code>process-sources</code>（处理源代码）</td>
<td align="left">处理源代码，比如说，过滤任意值。</td>
</tr>
<tr>
<td align="left"><code>generate-resources</code>（生成资源文件）</td>
<td align="left">生成将会包含在项目包中的资源文件。</td>
</tr>
<tr>
<td align="left"><code>process-resources</code> （处理资源文件）</td>
<td align="left">复制和处理资源到目标目录，为打包阶段最好准备。</td>
</tr>
<tr>
<td align="left"><code>compile</code>（编译）</td>
<td align="left">编译项目的源代码。</td>
</tr>
<tr>
<td align="left"><code>process-classes</code>（处理类文件）</td>
<td align="left">处理编译生成的文件，比如说对Java class文件做字节码改善优化。</td>
</tr>
<tr>
<td align="left"><code>generate-test-sources</code>（生成测试源代码）</td>
<td align="left">生成包含在编译阶段中的任何测试源代码。</td>
</tr>
<tr>
<td align="left"><code>process-test-sources</code>（处理测试源代码）</td>
<td align="left">处理测试源代码，比如说，过滤任意值。</td>
</tr>
<tr>
<td align="left"><code>generate-test-resources</code>（生成测试资源文件）</td>
<td align="left">为测试创建资源文件。</td>
</tr>
<tr>
<td align="left"><code>process-test-resources</code>（处理测试资源文件）</td>
<td align="left">复制和处理测试资源到目标目录。</td>
</tr>
<tr>
<td align="left"><code>test-compile</code>（编译测试源码）</td>
<td align="left">编译测试源代码到测试目标目录.</td>
</tr>
<tr>
<td align="left"><code>process-test-classes</code>（处理测试类文件）</td>
<td align="left">处理测试源码编译生成的文件。</td>
</tr>
<tr>
<td align="left"><code>test</code>（测试）</td>
<td align="left">使用合适的单元测试框架运行测试（Juint是其中之一）。</td>
</tr>
<tr>
<td align="left"><code>prepare-package</code>（准备打包）</td>
<td align="left">在实际打包之前，执行任何的必要的操作为打包做准备。</td>
</tr>
<tr>
<td align="left"><code>package</code>（打包）</td>
<td align="left">将编译后的代码打包成可分发格式的文件，比如JAR、WAR或者EAR文件。</td>
</tr>
<tr>
<td align="left"><code>pre-integration-test</code>（集成测试前）</td>
<td align="left">在执行集成测试前进行必要的动作。比如说，搭建需要的环境。</td>
</tr>
<tr>
<td align="left"><code>integration-test</code>（集成测试）</td>
<td align="left">处理和部署项目到可以运行集成测试环境中。</td>
</tr>
<tr>
<td align="left"><code>post-integration-test</code>（集成测试后）</td>
<td align="left">在执行集成测试完成后进行必要的动作。比如说，清理集成测试环境。</td>
</tr>
<tr>
<td align="left"><code>verify</code> （验证）</td>
<td align="left">运行任意的检查来验证项目包有效且达到质量标准。</td>
</tr>
<tr>
<td align="left"><code>install</code>（安装）</td>
<td align="left">安装项目包到本地仓库，这样项目包可以用作其他本地项目的依赖。</td>
</tr>
<tr>
<td align="left"><code>deploy</code>（部署）</td>
<td align="left">将最终的项目包复制到远程仓库中与其他开发者和项目共享。</td>
</tr>
</tbody></table>
<h3 id="Site-Lifecycle-（不常用）"><a href="#Site-Lifecycle-（不常用）" class="headerlink" title="Site Lifecycle （不常用）"></a>Site Lifecycle （不常用）</h3><table>
<thead>
<tr>
<th align="left">Phase</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>pre-site</code></td>
<td align="left">执行一些需要在生成站点文档之前完成的工作</td>
</tr>
<tr>
<td align="left"><code>site</code></td>
<td align="left">生成项目的站点文档</td>
</tr>
<tr>
<td align="left"><code>post-site</code></td>
<td align="left">执行一些需要在生成站点文档之后完成的工作，并且为部署做准备</td>
</tr>
<tr>
<td align="left"><code>site-deploy</code></td>
<td align="left">将生成的站点文档部署到特定的服务器上</td>
</tr>
</tbody></table>
<h2 id="绑定插件目标"><a href="#绑定插件目标" class="headerlink" title="绑定插件目标"></a>绑定插件目标</h2><p>绑定插件目标主要有两种方式：</p>
<ul>
<li><p>第一种方式，内置绑定。<strong>使用Maven内置的绑定。Maven根据不同的打包方式，为某些阶段默认绑定插件目标</strong>。由于其打包生成的目标包不同，因此阶段和阶段绑定的插件目标也存在差异。</p>
</li>
<li><p>第二种方式，自定义绑定。通过配置pom.xml文件，为阶段绑定插件目标。如此，阶段可能包含多个插件目标，其执行顺序为，<strong>先执行maven内置的为阶段绑定的目标（如果该阶段绑定了插件目标的话），然后按照你在pom文件中配置的插件目标的顺序依次执行（如果你为该阶段配置了多个插件目标的话）</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>  <br>        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>  <br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-resources<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>  <br>            <span class="hljs-comment">&lt;!-- 生命周期的阶段 verify --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>  <br>            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>  <br>                <span class="hljs-comment">&lt;!-- 插件目标 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar-no-fork<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>  <br>            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>    <br>        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="插件调用方式"><a href="#插件调用方式" class="headerlink" title="插件调用方式"></a>插件调用方式</h2><p>插件有如下几种调用方式：  </p>
<ol>
<li><p>**<code>mvn 生命周期阶段</code>**：如<code>mvn pre-clean</code>，maven 会自动执行与该生命周期绑定的插件目标。 </p>
</li>
<li><p>**<code>mvn groupId:artifactId[:version]:goal</code>**，如 <code>mvn org.apache.maven.plugins:maven-clean-plugin:3.1.0:clean</code>，对于版本号 version 来说是可以省略的，如果省略 maven 会使用本地仓库中最新的版本。  </p>
</li>
<li><p>**<code>mvn 插件前缀:goal</code>**：插件前缀可以理解为插件的标识，用于简化插件的调用，例如 <code>mvn spring-boot:run</code> 中的 spring-boot 就是 spring-boot-maven-plugin 插件的前缀，自定义插件如果遵循 xxx-maven-plugin 的形式，maven 默认会将 maven-plugin 前面的内容作为插件前缀。</p>
</li>
</ol>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p>我们以执行 <code>mvn clean</code> 为例说明</p>
<p>首先，我们要知道，clean生命周期有三个phase：pre-clean、clean、post-clean。我们现在要使用的是clean阶段。而每一个phase包含0个或多个插件，我们用如下方式查看对应的插件。</p>
<p>首先，我们在spring-boot-dependencies.pom中查找对应的插件</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-clean-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;maven-clean-plugin.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>使用如下命令查看这个插件的详细信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment"># 语法，插件标识可以是 groupId:artifactId[:version]</span><br>mvn <span class="hljs-keyword">help</span>:<span class="hljs-keyword">describe</span> -Dplugin=插件标识<br><br><span class="hljs-comment"># 示例</span><br>mvn <span class="hljs-keyword">help</span>:<span class="hljs-keyword">describe</span> -Dplugin=org.apache.maven.plugins:maven-clean-<span class="hljs-keyword">plugin</span> -Ddetail<br><br><span class="hljs-comment"># 还可以直接使用插件名替换 坐标进行简化</span><br>mvn <span class="hljs-keyword">help</span>:<span class="hljs-keyword">describe</span>  -Dplugin=compiler<br></code></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/2329252/202209/2329252-20220907151349088-1650030210.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><p>第一种调用方式：mvn 生命周期阶段</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">mvn </span>clean<br></code></pre></td></tr></table></figure>
</li>
<li><p>第二种调用方式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">mvn</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.maven</span><span class="hljs-selector-class">.plugins</span><span class="hljs-selector-pseudo">:maven-clean-plugin</span><span class="hljs-selector-pseudo">:3.1.0</span><span class="hljs-selector-pseudo">:clean</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>第三种调用方式：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">mvn </span>clean:clean<br></code></pre></td></tr></table></figure></li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  
    <span>></span>
    
  <a href="/categories/Java/Maven/" class="category-chain-item">Maven</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/" class="print-no-link">#Java</a>
      
        <a href="/tags/Maven/" class="print-no-link">#Maven</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>41-Maven 生命周期</div>
      <div>https://flepeng.github.io/021-Java-13-Maven-41-Maven-生命周期/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Lepeng</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年4月22日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/021-Java-13-Maven-41-Maven-%E5%8C%85%E4%BE%9D%E8%B5%96/" title="41-Maven 包依赖">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">41-Maven 包依赖</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/021-Java-13-Maven-93-Maven-%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95/" title="93-Maven 项目目录">
                        <span class="hidden-mobile">93-Maven 项目目录</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"flepeng/hexo-blog-comment","repo-id":"R_kgDOL0qaig","category":"Announcements","category-id":"DIC_kwDOL0qais4CfBIv","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
