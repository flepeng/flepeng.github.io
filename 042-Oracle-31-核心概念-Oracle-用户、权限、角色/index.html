

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2488174175014870" crossorigin="anonymous"></script><!-- google 广告 -->
  <meta name="google-site-verification" content="40lMg4eqLLbXoDcpN3h-cEnfmselbQ8tUzNvuC0IRIs" /><!-- google 站点认证 -->
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Lepeng">
  <meta name="keywords" content="">
  
    <meta name="description" content="1 用户（user）在 Oracle 数据库中，为了便于管理用户所创建的数据库对象（比如数据表、索引、视图等），引入了模式的概念，这样某个用户所创建的数据库对象就都属于该用户模式。 1.1 简介1.1.1 定义Oracle 用户就是访问 oracle 数据库的人。通过对用户的各种安全参数进行控制，以维护数据库的安全性，这些概念包括模式（schema）、权限、角色、存储设置、空间限额、存取资源限制、">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle 用户、权限、角色">
<meta property="og:url" content="https://flepeng.github.io/042-Oracle-31-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Oracle-%E7%94%A8%E6%88%B7%E3%80%81%E6%9D%83%E9%99%90%E3%80%81%E8%A7%92%E8%89%B2/index.html">
<meta property="og:site_name" content="Lepeng">
<meta property="og:description" content="1 用户（user）在 Oracle 数据库中，为了便于管理用户所创建的数据库对象（比如数据表、索引、视图等），引入了模式的概念，这样某个用户所创建的数据库对象就都属于该用户模式。 1.1 简介1.1.1 定义Oracle 用户就是访问 oracle 数据库的人。通过对用户的各种安全参数进行控制，以维护数据库的安全性，这些概念包括模式（schema）、权限、角色、存储设置、空间限额、存取资源限制、">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-31T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-03T10:25:30.362Z">
<meta property="article:author" content="Feng Lepeng">
<meta property="article:tag" content="Oracle">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Oracle 用户、权限、角色 - Lepeng</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"flepeng.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"f3d259b9efd9ce8655c180fd01bf0045","google":{"measurement_id":"G-LFTE4C7W3W"},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?f3d259b9efd9ce8655c180fd01bf0045";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-LFTE4C7W3W", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-LFTE4C7W3W');
        });
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Lepeng 的 blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Oracle 用户、权限、角色"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-04-01 00:00" pubdate>
          2025年4月1日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          56 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Oracle 用户、权限、角色</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="1-用户（user）"><a href="#1-用户（user）" class="headerlink" title="1 用户（user）"></a>1 用户（<code>user</code>）</h1><p>在 Oracle 数据库中，为了便于管理用户所创建的数据库对象（比如数据表、索引、视图等），引入了模式的概念，这样某个用户所创建的数据库对象就都属于该用户模式。</p>
<h2 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1 简介"></a>1.1 简介</h2><h3 id="1-1-1-定义"><a href="#1-1-1-定义" class="headerlink" title="1.1.1 定义"></a>1.1.1 定义</h3><p><code>Oracle</code> 用户就是访问 <code>oracle</code> 数据库的人。通过对用户的各种安全参数进行控制，以维护数据库的安全性，这些概念包括模式（<code>schema</code>）、权限、角色、存储设置、空间限额、存取资源限制、数据库审计等。当用户登录 <code>Oracle</code> 时需要进行身份认证，以便确认该用户能够进行的操作。</p>
<p><code>认证</code> 是指对需要使用数据、资源或应用程序的用户进行身份确认。通过认证后，可以为用户后面的数据库操作提供一种可靠的连接关系。<code>Oracle</code> 提供了多种身份认证方式：操作系统身份认证，Oracle 数据库身份认证，管理员身份认证。</p>
<ul>
<li><code>操作系统身份认证</code>：主要对登录操作系统的用户的合法身份进行认证。如：sqlplus &#x2F; as sysdba</li>
<li><code>Oracle 数据库身份认证</code>：使用存储在数据库中的信息对试图连接数据库的用户进行身份认证。在用户连接数据库时，必须提供正确的用户名和密码，才能登录到 Oracle 数据库。</li>
<li><code>数据库管理员（DBA）认证</code>：DBA 拥有最高的管理权限，可以执行一些特殊的操作，比如关闭或启动数据库。</li>
</ul>
<h3 id="1-1-2-用户相关信息"><a href="#1-1-2-用户相关信息" class="headerlink" title="1.1.2 用户相关信息"></a>1.1.2 用户相关信息</h3><h4 id="1-1-2-1-用户默认表空间"><a href="#1-1-2-1-用户默认表空间" class="headerlink" title="1.1.2.1 用户默认表空间"></a>1.1.2.1 用户默认表空间</h4><p><code>表空间</code> 是信息存储的最大逻辑单位、当用户连接到数据库时，若未指出数据的目标存储表空间时，则数据存储在用户的默认表空间中。</p>
<p>用户的默认表空间可以在创建用户时指定，也可以使用 <code>aler user</code> 命令指定。如果创建用户时不指定默认表空间，则普通用户的默认空间为 <code>users</code>，sys 用户的默认表空间为 <code>system</code>，可以通过 <code>dba_users</code> 查看（<code>all_users</code> 的信息要比 <code>dba_users</code> 少）。</p>
<h4 id="1-1-2-2-用户临时表空间"><a href="#1-1-2-2-用户临时表空间" class="headerlink" title="1.1.2.2 用户临时表空间"></a>1.1.2.2 用户临时表空间</h4><p>临时表空间用来管理数据库排序操作以及用于存储 <code>临时表</code>、<code>中间排序结果</code> 等临时对象。当 <code>ORACLE</code> 需要用到排序时，并且 PGA 中 <code>sort_area_size</code> 大小不足时，将会把数据放入临时表空间里进行排序。如果创建用户时，不指定默认的临时表空间，则默认临时表空间为 temp。</p>
<h4 id="1-1-2-3-用户资源文件"><a href="#1-1-2-3-用户资源文件" class="headerlink" title="1.1.2.3 用户资源文件"></a>1.1.2.3 用户资源文件</h4><p>用户资源文件用来对用户的资源存取进行限制，防止非正常连接数据库。包括：cpu 使用时间限制、内存逻辑读个数限制、每个用户同时可以连接的会话数限制、一个会话的空间和时间限制、一个会话的持续时间限制、每次会话的专用 SGA 空间限制。</p>
<p>创建资源文件命令如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> profile profile_name <span class="hljs-keyword">limit</span> 参数 ...;<br><br>资源文件的参数如下：<br>connect_time：指定一个会话能保持连接到数据库的总时间<br>cpu_per_call：限制事务内每个调用使用CPU的时间。<br>cpu_per_sessin：限制每个会话内使用CPU的时间。<br>sessions_per_time：限制用户可以打开并发的最大会话数。<br>idle_time：限制用户的最大空闲时间。<br>logical_reads_per_session：限制数据块读取的总数目。<br>logical_reads_per_call：限制每个会话调用总的逻辑读取数。<br>private_sga：指定一个在SGA的共享池组件中分配的空间限额（仅适用于共享服务器）。<br><br>composite_limit：对资源设置使用一个总的限制。Oracle考虑用四个参数来计算加权的composite_limit。分别为:cpu_per_session, logical_reads_per_sessions, connect_time, private_sga。可以使用 <span class="hljs-keyword">alter</span> <span class="hljs-keyword">resource</span> <span class="hljs-keyword">cost</span>来设置.。<br><br>密码类：<br><span class="hljs-keyword">failed_login_attempts</span>：指用户被锁之前可以尝试的最大登录数。<br>password_life_time：指定使用特定密码的时间限制，如果超出此时间间隔，那么密码将过期。<br><span class="hljs-keyword">password_grace_time</span>：设置一个时间段，在此时间段内将发出一个密码过期警告。<br><span class="hljs-keyword">password_lock_time</span>：设置用户被锁定的天数，过了此天数，用户将自行解锁。<br><span class="hljs-keyword">password_reuse_time</span>：指定重新使用密码要经过多少天。<br><span class="hljs-keyword">password_reuse_max</span>：指定重新使用某个特定密码前，要经过多少次修改。<br>passwrod_verify_function：此参数允许指定<span class="hljs-keyword">Oracle</span>提供的密码验证函数来建立自动密码验证。<br></code></pre></td></tr></table></figure>

<p>为用户指定资源文件：<code>alter user user_name profile rofile_name;</code></p>
<h4 id="1-1-2-4-用户表空间限额"><a href="#1-1-2-4-用户表空间限额" class="headerlink" title="1.1.2.4 用户表空间限额"></a>1.1.2.4 用户表空间限额</h4><p>配额大小指的是用户指定使用表空间的的大小，默认情况下用户没有配额限制。在创建或修改用户时，可以由参数 <code>quota</code> 指定。若用户在向表空间存储数据时，超出了此限额，则会产生错误。错误信息如：<code>ORA-01536:space quota exceeded for tablespace tablespacename…</code>。</p>
<p>通过查询字典 <code>dba_ts_quotas</code> 查看表空间限额信息：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; select tablespace_name, username, bytes/1024/1024 size_MB, max_bytes from dba_ts_quotas;<br></code></pre></td></tr></table></figure>


<h4 id="1-1-2-5-用户管理有关的数据字典"><a href="#1-1-2-5-用户管理有关的数据字典" class="headerlink" title="1.1.2.5 用户管理有关的数据字典"></a>1.1.2.5 用户管理有关的数据字典</h4><p>Oracle 和用户管理相关的数据字典主要有三个：<code>DBA_USERS</code>、<code>USER_USERS</code>、<code>ALL_USERS</code>：</p>
<ul>
<li><code>DBA_USERS</code>：该数据字典用于查询 Oracle 的所有用户信息</li>
<li><code>ALL_USERS</code>：该数据字典用来查询所有用户的信息，但是能够查询的信息比 <code>DBA_USERS</code> 要少得多</li>
<li><code>USER_USERS</code>：该数据字典用来查询当前用户的信息</li>
</ul>
<h3 id="1-1-3-用户、模式、模式对象"><a href="#1-1-3-用户、模式、模式对象" class="headerlink" title="1.1.3 用户、模式、模式对象"></a>1.1.3 用户、模式、模式对象</h3><p>用户、模式、模式对象区别：</p>
<ul>
<li><code>用户</code>：这里的用户并不是指数据库的操作人员，而是数据库中定义的一个名称，更准确地说它是账户，只是习惯上称其为用户。也可以说用户是用来连接数据库和访问数据库对象的</li>
<li><code>模式</code>：在 oracle 中，为了便于管理用户所创建的数据库对象，引入了模式概念。模式是一个数据库对象的集合。模式为一个数据库用户所拥有，并且具有与该用户相同的名称</li>
<li><code>模式对象</code>：由用户创建的逻辑结构，用以存储或引用数据，其实就是指数据库对象</li>
</ul>
<p>用户与模式区别：</p>
<ul>
<li>用户是连接数据库对象</li>
<li>模式是管理数据库对象的</li>
<li>用户与模式在 oracle 中是一对一关系</li>
</ul>
<p>模式与模式对象：</p>
<ul>
<li><code>模式</code> 是一个数据库对象的集合。模式为一个数据库用户所有，并且具有与该用户相同的名称，比如 <code>SYSTEM 模式</code>、<code>SCOTT 模式</code> 等。在一个模式内部不可以直接访问其他模式的数据库对象，即使在具有访问权限的情况下，也需要指定模式名称才可以访问其他模式的数据库对象。</li>
<li><code>模式对象</code> 是由用户创建的逻辑结构，用以存储或引用数据。简单地说，模式与模式对象之间的关系就是拥有与被拥有的关系，即模式拥有模式对象；而模式对象被模式所拥有。</li>
</ul>
<h3 id="1-1-4-实例模式-SCOTT"><a href="#1-1-4-实例模式-SCOTT" class="headerlink" title="1.1.4 实例模式 SCOTT"></a>1.1.4 实例模式 SCOTT</h3><p>Oracle 提供的 SCOTT 模式的目的，就是为了给用户提供一些实例表和数据来展示 Oracle 数据库的一些特性，通过连接到 SCOTT 用户模式，查询数据字典视图 <code>USER_TABLES</code> 可以获得该模式所包含的数据表，共计 4 个。  </p>
<p>另外，用户也可以在 SYSTEM 模式下查询 SCOTT 模式所拥有的数据表，但要求使用 <code>dba_tables</code> 数据表。</p>
<h3 id="1-1-5-各个用户区别"><a href="#1-1-5-各个用户区别" class="headerlink" title="1.1.5 各个用户区别"></a>1.1.5 各个用户区别</h3><p>(1)sys 和 system 用户：</p>
<ul>
<li><code>system</code>：普通管理员。用户具有 <code>DBA</code> 权限，但是没有 <code>SYSDBA</code> 权限，用户只能用 <code>normal</code> 身份登陆。system 是数据库内置的一个普通管理员，手工创建的任何用户在被授予 dba 角色后都跟这个用户差不多。</li>
<li><code>sys</code>：超级管理员。用户具有 <code>SYSDBA</code> 或者 <code>SYSOPER</code> 权限，登陆也只能用这两个身份，不能用<code>normal</code>。sys 用户具有 DBA 权限，并具有 SYS 模式。只能通过 SYSDBA 登录数据库，是 Oracle 数据库中权限最高的帐号</li>
</ul>
<p>normal 、sysdba、 sysoper 区别：</p>
<ul>
<li><code>normal</code>：是普通用户，登录后仍然是登录名（show user命令）</li>
<li><code>sysdba</code>：拥有最高的系统权限，sysdba 登陆后是 sys （show user命令）</li>
<li><code>sysoper</code>：主要用来启动、关闭数据库，sysoper 登陆后用户是 public（show user命令）</li>
</ul>
<p><code>SYSOPER</code> 权限，即数据库操作员权限，权限包括：</p>
<ul>
<li>打开数据库服务器；关闭数据库服务器</li>
<li>备份数据库；恢复数据库</li>
<li>日志归档 ；会话限制</li>
</ul>
<p><code>SYSDBA</code> 权限，即数据库管理员权限，权限包括：</p>
<ul>
<li>打开数据库服务器；关闭数据库服务器</li>
<li>备份数据库；恢复数据库</li>
<li>日志归档 ；会话限制</li>
<li>管理功能； 创建数据库</li>
</ul>
<p>(2)sysman：是 Oracle 数据库中用于 EM 管理的用户，可以删除</p>
<p>(3)scott：Oracle 提供的示例用户，里面有一些给初学者操作的表，例如(emp，dept，salgrade，bonus)</p>
<h2 id="1-2-用户管理"><a href="#1-2-用户管理" class="headerlink" title="1.2 用户管理"></a>1.2 用户管理</h2><p>Oracle 数据库中任何对象都属于一个特定用户，用户的创建、删除、授权管理相关操作需要具备 dba(数据库管理员)权限。</p>
<h3 id="1-2-1-创建用户"><a href="#1-2-1-创建用户" class="headerlink" title="1.2.1 创建用户"></a>1.2.1 创建用户</h3><p>创建用户的语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> user_name<br><span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">password</span><br><span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">TABLESPACE</span> tablespace_name<br><span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLESPACE</span> tablespace_name<br>PROFILE profile_name <span class="hljs-keyword">QUOTA</span> <span class="hljs-built_in">integer</span>|<span class="hljs-keyword">UNLIMITED</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">tablespace</span>;<br></code></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li><code>IDENTIFIED BY password</code>：用户口令</li>
<li><code>DEFAULT TABLESPACE tablespace</code>：默认表空间。如果不指定，默认空间为 users</li>
<li><code>TEMPORARY TABLESPACE tablespace</code>：临时表空间。如果不指定，默认为 temp</li>
<li><code>PROFILE profile|DEFAULT</code>：用户资源文件；</li>
<li><code>QUOTA integer[K|M]|UNLIMITED ON tablespace</code>：用户在表空间上的空间使用限额</li>
</ul>
<p>查询用户的默认表空间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; select username, default_tablespace, temporary_tablespace from dba_users where username = 'WGX';<br><br><span class="hljs-comment">-- 查询用户 wgx 的资源文件名</span><br><span class="hljs-keyword">select</span> username,profile <span class="hljs-keyword">from</span> dba_users <span class="hljs-keyword">where</span> username=<span class="hljs-string">'WGX'</span>;<br></code></pre></td></tr></table></figure>


<h3 id="1-2-2-修改用户"><a href="#1-2-2-修改用户" class="headerlink" title="1.2.2 修改用户"></a>1.2.2 修改用户</h3><p>修改用户的语法如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 该命令各部分参数的含义与 create user 完全相同</span><br><span class="hljs-keyword">Alter</span> <span class="hljs-keyword">User</span> user_name<br><span class="hljs-keyword">Identified</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">password</span><br><span class="hljs-keyword">Default</span> <span class="hljs-keyword">Tablespace</span> tablespace_name<br><span class="hljs-keyword">Temporary</span> <span class="hljs-keyword">Tablespace</span> tablespace_name<br>Profile profile_name<br><span class="hljs-keyword">Quota</span> <span class="hljs-built_in">integer</span>/<span class="hljs-keyword">unlimited</span> <span class="hljs-keyword">on</span> <span class="hljs-keyword">tablespace</span>;<br></code></pre></td></tr></table></figure>

<p>修改相关 sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改用户 wgx 的密码，注：密码用双引号括起来</span><br>SQL&gt; alter user wgx identified by "WGX123456";<br><br><br><span class="hljs-comment">-- 修改用户 wgx 的默认表空间</span><br>SQL&gt; alter user wgx default tablespace ts003;<br><br><br><span class="hljs-comment">-- 修改用户 wgx 的默认临时表空间</span><br>SQL&gt; alter user wgx temporary tablespace temp03;<br><br><br><span class="hljs-comment">-- 修改用户 wgx 的资源文件</span><br>SQL&gt; alter user wgx profile wgx_new_profile;<br><br><br><span class="hljs-comment">-- 查看用户 wgx 的信息</span><br>SQL&gt; select username,default_tablespace,temporary_tablespace,profile from dba_users where username ='WGX';<br><br><br><span class="hljs-comment">-- 为用户 wgx 授予权限</span><br>SQL&gt; grant connect,resource to wgx;<br><span class="hljs-keyword">Grant</span> succeeded.<br><br><br><span class="hljs-comment">-- 强制用户 wgx 修改密码</span><br><span class="hljs-keyword">SQL</span>&gt; <span class="hljs-keyword">Alter</span> <span class="hljs-keyword">user</span> wgx <span class="hljs-keyword">password</span> <span class="hljs-keyword">expire</span>;<br>User altered.<br><br><br><span class="hljs-comment">-- 当用户 wgx 登录时强制要求修改密码</span><br>SQL&gt; conn wgx/WGX123456<br>ERROR:<br>ORA-28001: the password has expired<br><br><br><span class="hljs-comment">-- 为用户加锁</span><br>SQL&gt; alter user wgx account lock;<br>User altered.<br><br><br><span class="hljs-comment">-- 以 wgx 用户登录时显示用户被锁定</span><br>SQL&gt; conn wgx<br>Enter password: <br>ERROR:<br>ORA-28000: the account is locked<br>Warning: You are no longer connected to ORACLE.<br><br><br><span class="hljs-comment">-- 为用户解锁</span><br>SQL&gt; alter user wgx account unlock;<br>User altered.<br></code></pre></td></tr></table></figure>


<h3 id="1-2-3-用户监控"><a href="#1-2-3-用户监控" class="headerlink" title="1.2.3 用户监控"></a>1.2.3 用户监控</h3><p>查询用户会话信息</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; select username, sid, serial#, machine from v$session where username = 'WGX';<br></code></pre></td></tr></table></figure>

<p>删除用户会话信息</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">命令格式：<br><span class="hljs-keyword">Alter</span> <span class="hljs-keyword">system</span> <span class="hljs-keyword">kill</span> <span class="hljs-keyword">session</span> <span class="hljs-string">'sid, serial#'</span>;<br><br>SQL&gt; alter system kill session '34,73';<br>System altered.<br><br>SQL&gt; select username, sid, serial#,status, machine from gv$session where username ='WGX';<br></code></pre></td></tr></table></figure>


<h3 id="1-2-4-删除用户"><a href="#1-2-4-删除用户" class="headerlink" title="1.2.4 删除用户"></a>1.2.4 删除用户</h3><p>删除用户的语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">user</span> user_name [descade];<br></code></pre></td></tr></table></figure>

<p>说明：如果要删除的用户包含对象，需要使用 <code>descade</code> 参数连同包含的对象一并删除</p>
<h2 id="1-3-用户管理"><a href="#1-3-用户管理" class="headerlink" title="1.3 用户管理"></a>1.3 用户管理</h2><h3 id="1-3-1-限制-dba-用户远程登录"><a href="#1-3-1-限制-dba-用户远程登录" class="headerlink" title="1.3.1 限制 dba 用户远程登录"></a>1.3.1 限制 dba 用户远程登录</h3><p>限制具备超级管理（sysdba）权限的用户远程登录。</p>
<p>设置初始化参数 <code>remote_login_passwordfile=none</code>，禁止 <code>sysdba</code> 用户远程登录</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">查看参数<br>SQL&gt; show parameter remote_login_passwordfile<br><br>SQL&gt; alter system set remote_login_passwordfile=none scope=spfile sid='*';<br>System altered.<br><br><span class="hljs-comment">--重启数据库，查看初始化参数 remote_login_passwordfile 的取值</span><br>SQL&gt; show parameter remote_login_passwordfile<br></code></pre></td></tr></table></figure>

<p>在 <code>sqlnet.ora</code> 中设置 <code>SQLNET.AUTHENTICATION_SERVICES=NONE</code> 禁止 <code>sysdba</code> 角色的自动登录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">[grid@rac2 ~]$ cd $ORACLE_HOME/network/admin<br><br>[grid@rac2 admin]$ vi sqlnet.ora<br><span class="hljs-meta">#</span><span class="bash"> sqlnet.ora.rac2 Network Configuration File: /u01/app/11.2.0/grid/network/admin/sqlnet.ora.rac2</span><br><span class="hljs-meta">#</span><span class="bash"> Generated by Oracle configuration tools.</span><br>NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)<br>ADR_BASE = /u01/app/grid<br>SQLNET.AUTHENTICATION_SERVICES=NONE<br></code></pre></td></tr></table></figure>


<h3 id="1-3-2-用户最小权限原则"><a href="#1-3-2-用户最小权限原则" class="headerlink" title="1.3.2 用户最小权限原则"></a>1.3.2 用户最小权限原则</h3><p>根据业务需要，为用户配置所需的最小权限。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--为用户赋予最小权限</span><br><span class="hljs-keyword">grant</span> 权限 <span class="hljs-keyword">to</span> user_name;<br><br><span class="hljs-comment">--收回用户的多余权限</span><br><span class="hljs-keyword">revoke</span> 权限 <span class="hljs-keyword">from</span> user_name;<br></code></pre></td></tr></table></figure>


<h3 id="1-3-3-数据字典保护"><a href="#1-3-3-数据字典保护" class="headerlink" title="1.3.3 数据字典保护"></a>1.3.3 数据字典保护</h3><p>启用数据字典保护，只有 <code>sysdba</code> 用户才能访问数据字典表。设置初始化参数 <code>O7_DICTIONARY_ACCESSIBILITY</code> 为 false。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; show parameter o7<br></code></pre></td></tr></table></figure>


<h1 id="2-权限"><a href="#2-权限" class="headerlink" title="2 权限"></a>2 权限</h1><h2 id="2-1-简介"><a href="#2-1-简介" class="headerlink" title="2.1 简介"></a>2.1 简介</h2><p><code>权限</code> 是用户对一项功能的执行权力。每个 <code>Oracle</code> 用户都拥有一些由其创建的表、视图和其他资源。Oracle 系统提供三种权限：对象级（<code>Object</code>），系统级（<code>System</code>），角色级（<code>Role</code>）。</p>
<p>这些权限可以授予给用户、特殊用户 <code>public</code> 或 角色，</p>
<ul>
<li>用户 public 是 Oracle 预定义的，每个用户享有这个用户享有的权限。如果授予一个权限给特殊用户 Public，则意味作将该权限授予了该数据库的所有用户。</li>
<li><code>Oracle</code> 角色（<code>role</code>）是一组权限（<code>privilege</code>）。可以给角色授予指定的权限，然后将角色赋给相应的用户。对管理权限而言，角色是一个工具，权限能够被授予给一个角色，角色也能被授予给另一个角色或用户。用户可以通过角色继承权限，除了管理权限外角色服务没有其它目的。</li>
</ul>
<h2 id="2-2-权限分类"><a href="#2-2-权限分类" class="headerlink" title="2.2 权限分类"></a>2.2 权限分类</h2><p>在 <code>Oracle</code> 中，根据系统管理方式不同，将权限分为系统权限与实体权限两类。</p>
<ul>
<li><p><code>系统权限</code>：是指被授权用户是否可以连接到数据库上，在数据库中可以进行哪些系统操作：例如启动&#x2F;停止数据库，修改数据库参数。<br>系统权限是针对于用户设置的，用户必须被授予相应的系统权限，才能连接到数据库中进行想要的操作。  </p>
</li>
<li><p><code>实体权限</code>：是指用户对具体的模式实体（<code>schema</code>）所拥有的权限。</p>
</li>
</ul>
<h3 id="2-2-1-系统权限管理"><a href="#2-2-1-系统权限管理" class="headerlink" title="2.2.1 系统权限管理"></a>2.2.1 系统权限管理</h3><p>相关操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 系统权限授权：系统权限授权，系统权限只能由 DBA 用户授出，命令如下：</span><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">connect</span>, <span class="hljs-keyword">resource</span>, dba <span class="hljs-keyword">to</span> 用户名<span class="hljs-number">1</span> [,用户名<span class="hljs-number">2</span>]...;<br><br><br><span class="hljs-comment">-- 查看系统权限：使用DBA_SYS_PRIVS 查看系统权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> dba_sys_privs <span class="hljs-keyword">where</span> grantee=<span class="hljs-string">'CONNECT'</span>;<br><br><br><span class="hljs-comment">-- 系统权限传递：授予权限时使用 WITH ADMIN OPTION选项，则得到的权限可以传递，即用户可以把自己的系统再授予其他用户。</span><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">connect</span>, <span class="hljs-keyword">resource</span>, dba <span class="hljs-keyword">to</span> white <span class="hljs-keyword">with</span> <span class="hljs-keyword">admin</span> <span class="hljs-keyword">option</span>;<br><br><br><span class="hljs-comment">-- 系统权限回收：系统权限无级联，即 A 授予 B 权限，B 授予 C 权限，如果 A 收回 B 的权限，C 的权限不受影响</span><br><span class="hljs-keyword">Revoke</span> <span class="hljs-keyword">connect</span>, <span class="hljs-keyword">resource</span> <span class="hljs-keyword">from</span> 用户名<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure>

<p>常见的系统权限</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">CREATE SESSION      连接数据库<br>CREATE TABLESPACE   创建表空间<br>ALTER TABLESPACE    修改表空间<br>DROP TABLESPACE     删除表空间<br>CREATE<span class="hljs-built_in"> USER </span>        创建用户<br>DROP<span class="hljs-built_in"> USER </span>          修改用户<br>CREATE TABLE        创建表<br></code></pre></td></tr></table></figure>

<p>全部的系统权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs sql">表空间 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLESPACE</span>   创建表空间；不管用户有何操作系统特权，经由<span class="hljs-keyword">Oracle</span>把文件添加到操作系统中<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLESPACE</span>    改变表空间；不管用户有何操作系统特权，经由<span class="hljs-keyword">Oracle</span>把文件添加到操作系统中<br>MANAGE <span class="hljs-keyword">TABLESPACE</span>   使任何表空间脱机，使任何表空间联机，开始和结束对任何表空间的备份<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLESPACE</span>     删除表空间<br><span class="hljs-keyword">UNLIMITED</span> <span class="hljs-keyword">TABLESPACE</span>  使用任何没有数量限制的表空间。此特权忽略了所分配的任何具体定额。假如被取消的话，被授权者的模式对象仍然保留，但是进一步的表空间分配被拒绝，除非这一分配是具体的表空间定额允许的。此系统特权仅可以授予用户，而不授予角色。一般而言，应分配具体的表空间定额，而不授予此系统特权<br><br>用户  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">USER</span> 创建用户；分配任意表空间上的定额，设置缺省和临时表空间，指定一个环境资源文件（在<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> 语句中）<br>BECOME <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">USER</span> 成为另一个用户（这是任何一个执行完全数据库导入的用户所需要的）<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span>      改变其他用户：修改任意用户的口令或验证方法，分配表空间定额，设置缺省或临时表空间，在<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> 语句中指定环境资源文件与缺省角色（不必改变自有口令）<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span>       删除另一个用户<br><br>角色  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ROLE</span>     创建角色<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">ROLE</span>  改变数据库中的任何一个角色<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">ROLE</span>   删除数据库中的任何一个角色<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">ROLE</span>  授权数据库中的任何一个角色<br><br>表<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span>      在自有模式中创建表。还使被授权者能在自有模式下的表中创建索引，包括那些用于完整性约束的索引（被授权者必须有表空间的定额或<span class="hljs-keyword">UNLIMITED</span> <span class="hljs-keyword">TABLESPACE</span> 特权）<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>  在任何模式中创建表（假如被授权者有<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 特权并在另一个用户模式中创建了一张表，那么拥有者必须在那个表空间上有空间定额。表的拥有者不必具有CREAT [<span class="hljs-keyword">ANY</span>] <span class="hljs-keyword">TABLE</span> 特权）<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>   改变任何模式中的任何表并编译任何模式中的任何视图<br><span class="hljs-keyword">BACKUP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>  在任何模式中使用表的导出工具执行一个增量导出操作<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>    删除或截断任何模式中的任何表<br><span class="hljs-keyword">LOCK</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>    锁定任何模式中的任何表或视图特权  所能实现的操作<br><span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 对任何模式中的任何表、视图或列进行注释<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>  对任何模式中的任何表、视图或快照进行查询<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>  把行插入到任何模式中的任何表或视图中<br><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>  修改任何模式中的任何表或视图中的行<br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>  删除任何模式中的任何表或视图中的行<br><br>索引  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">INDEX</span>  在任何表的任何模式中创建一条索引<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">INDEX</span>   改变数据库中的任何索引<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">INDEX</span>    删除数据库中的任何索引<br><br>视图  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span>       在自有模式中创建视图<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">VIEW</span>   在任意模式中创建视图。要在另一个用户模式中创建视图，你必须具有<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">VIEW</span> 特权，拥用者必须在该视图引用的对象上具有所需的特权<br><br>过程  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span>      在自有模式中创建存储的过程、函数和包<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">PROCEDURE</span>  在任何模式中创建存储的过程、函数和包（这要求用户还要有<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 、<span class="hljs-keyword">BACKUP</span> <span class="hljs-keyword">ANY</span> TA B LE 、<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 、<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 、<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 、<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 、<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 或<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> 特权 <br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">PROCEDURE</span>   编译任何模式中的任何存储的过程、函数或包<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">PROCEDURE</span>    删除任何模式中的任何存储的过程、函数或包<br><span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">PROCEDURE</span> 执行任何过程或函数（独立的或成组的），或在任何模式中引用任何包变量<br>DEBUG <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">PROCEDURE</span>   查看定义任何存储程序<br><br>序列  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SEQUENCE</span>     在自有模式中创建序列<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SEQUENCE</span> 在任何模式中创建任何序列<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SEQUENCE</span>  在任何模式中改变任何序列<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SEQUENCE</span>   在任何模式中删除任何序列<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SEQUENCE</span> 在任何模式中引用任何序列<br><br>触发器 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span>      在自有模式中创建触发器<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TRIGGER</span>  在任何模式中创建与任何模式的任何表相关的任何触发器<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TRIGGER</span>   启用、停用或编译任何模式中的任何触发器<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TRIGGER</span>    删除任何模式中的任何触发器<br><br>同义词 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SYNONYM</span>      在自有模式中创建同义词<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SYNONYM</span>  在任何模式中创建任何同义词<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SYNONYM</span>    在任何模式中删除任何同义词<br><br>分析  　<br><span class="hljs-keyword">ANALYZE</span> <span class="hljs-keyword">ANY</span>   分析数据库中的任何表、簇或索引<br><br>审计  　<br><span class="hljs-keyword">AUDIT</span> <span class="hljs-keyword">ANY</span>     审计数据库中的任何模式对象<br><span class="hljs-keyword">AUDIT</span> <span class="hljs-keyword">SYSTEM</span>  启用与停用语句和特权的审计选项<br><br>簇 　<br><span class="hljs-keyword">CREATE</span> CLUSTER      在自有的模式中创建一个簇<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> CLUSTER  在任何一个模式中创建一个簇；操作类似于<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ANY</span> CLUSTER   改变数据库中的任何一个簇<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> CLUSTER    删除数据库中的任何一个簇<br><br>数据库 　<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">DATABASE</span>          改变数据库；不管操作系统的特权，经由<span class="hljs-keyword">Oracle</span>把文件添加到操作系统中数据库链接 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-keyword">LINK</span>    在自有模式中创建专用数据库链接库 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">LIBRARY</span>          在自有模式中创建调出库<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">LIBRARY</span>      在任何模式中创建调出库<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">LIBRARY</span>            删除自有模式中的调出库<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">LIBRARY</span>        删除任何模式中的调出库<br><br>特权  　<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ANY</span> PRIVILEGE    授予任何系统特权（不包括对象特权）环境资源文件  　<br><span class="hljs-keyword">CREATE</span> PROFILE         创建环境资源文件<br><span class="hljs-keyword">ALTER</span> PROFILE          改变数据库中的任何环境资源文件<br><span class="hljs-keyword">DROP</span> PROFILE           删除数据库中的任何环境资源文件<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">COST</span>    设置所有的用户会话中使用的资源开销特权  所能实现的操作<br><br>公共数据库链接 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-keyword">LINK</span> 创建公共数据库链接<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-keyword">LINK</span>   删除公共数据库链接<br><br>公共同义词 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-keyword">SYNONYM</span> 创建公共同义词<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-keyword">SYNONYM</span>   删除公共同义词<br><br>回滚段 　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">SEGMENT</span> 创建回滚段<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">SEGMENT</span>  改变回滚段<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">SEGMENT</span>   删除回滚段<br><br>会话  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>  连接到数据库。用户被创建后，没有任何权限，包括登录。用户如果想登录，至少需要有 <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span> 的权限<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SESSION</span>   发出A LTER <span class="hljs-keyword">SESSION</span> 语句<br><span class="hljs-keyword">RESTRICTED</span> <span class="hljs-keyword">SESSION</span>  当数据库利用<span class="hljs-keyword">STARTUP</span> RESTRICT 启动时进行连接（OSOPER与OSDBA角色包含此特权）<br><br>快照  　<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SNAPSHOT</span>       在自有模式中创建快照（用户还必须具有C R E ATE TA B L E 特权）<br><span class="hljs-keyword">CREATE</span>  <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SNAPSHOT</span>  在任何模式中创建快照（用户还必须具有<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span>特权）<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SNAPSHOT</span>        改变任何模式中的任何快照<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">SNAPSHOT</span>     删除任何模式中的任何快照<br><br>系统  　<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span>  发出<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> 语句<br><br>事务  　<br><span class="hljs-keyword">FORCE</span> <span class="hljs-keyword">TRANSACTION</span>       强迫提交或回滚本地数据库中悬而未决的自有的分布式事务<br><span class="hljs-keyword">FORCE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TRANSACTION</span>   强迫提交或回滚本地数据库中悬而未决的任何分布式事务<br></code></pre></td></tr></table></figure>


<h3 id="2-2-2-实体权限管理"><a href="#2-2-2-实体权限管理" class="headerlink" title="2.2.2 实体权限管理"></a>2.2.2 实体权限管理</h3><p>实体权限分类：<code>select、update、insert、alter、index、delete、all、execute</code>  </p>
<p><code>DBA</code> 用户可以操作全体用户的任意基表，无需授权。  </p>
<p>使用 sys 账户为 white 用户和 black 用户创建表，并输入数据：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; show user<br>USER is "SYS"<br>SQL&gt; create table white.t1(x int,name varchar2(20));<br>                  *<br>SQL&gt; insert into white.t1 values(1,'white:t1');<br><br>SQL&gt; create table black.t22(x int,name varchar2(20));<br><br>SQL&gt; insert into black.t22 values(1,'black:t22');<br></code></pre></td></tr></table></figure>

<p>授权相关</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">为 white 用户授予实体权限<br>SQL&gt; grant select on scott.emp to white;<br></code></pre></td></tr></table></figure>

<p>实体权限传递授权：授权时使用 <code>with grant option</code> 参数可实现实体权限的传递授权。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; grant select on scott.dept to white with grant option;<br></code></pre></td></tr></table></figure>

<p>实体权限的回收：收回white 用户针对 scott.emp 对象的查询权限<br>如果收回某个用户的对象权限，那么对于这个用户使用 <code>WITH GRANT OPTION</code> 授予权限的用户来说，同样还会收回这些用户的相同权限，也就是说回收授权是级联的</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; revoke select on scott.emp from white;<br></code></pre></td></tr></table></figure>

<p>将对象权限授予全体用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">将对象 white.t1 的查询权限授予所有用户<br>SQL&gt; grant select on white.t1 to public;<br><span class="hljs-keyword">Grant</span> succeeded.<br></code></pre></td></tr></table></figure>


<h2 id="2-3-查询用户权限"><a href="#2-3-查询用户权限" class="headerlink" title="2.3 查询用户权限"></a>2.3 查询用户权限</h2><p><code>ORACLE</code> 的数据字典分为：<code>USER，ALL 和 DBA</code></p>
<ul>
<li><code>USER_*</code>：有关用户所拥有的对象信息，即用户自己创建的对象信息。</li>
<li><code>ALL_*</code>：有关用户可以访问的对象的信息，即用户自己创建的对象的信息加上其他用户创建的对象但该用户有权访问的信息。</li>
<li><code>DBA_*</code>：整个数据库中对象的信息。</li>
</ul>
<p>与用户权限相关的数据字典表有：</p>
<ul>
<li><p>系统权限<br>所有用户和角色所拥有的系统权限，使用 <code>where grantee=‘*’</code><br>查询指定用户或角色所拥有的系统权限：<code>DBA_SYS_PRIVS</code><br>当前用户所拥有的系统权限：<code>USER_SYS_PRIVS</code><br>某个角色所拥有的系统权限：<code>ROLE_SYS_PRIVS</code></p>
</li>
<li><p>对象权限<br>所有用户的对象权限：<code>DBA_TAB_PRIVS</code><br>所有用户的对象权限：<code>ALL_TAB_PRIVS</code><br>当前用户的对象权限：<code>USER_TAB_PRIVS</code><br>角色所拥有的对象权限：<code>ROLE_TAB_PRIVS</code></p>
</li>
<li><p>当前会话的权限<br>当前用户所拥有的系统权限和对象权限：<code>SESSION_PRIVS</code><br>当前用户被激活的角色：<code>SESSION_ROLES</code></p>
</li>
<li><p>角色信息<br>所有角色：<code>DBA_ROLES</code><br>授予用户的角色：<code>DBA_ROLE_PRIVS</code></p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--系统级权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> dba_sys_privs;<span class="hljs-comment">--查询所有用户的系统权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> user_sys_privs;<span class="hljs-comment">--查询当前用户的系统权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> session_privs;<span class="hljs-comment">--查自己拥有哪些系统权限</span><br><br><span class="hljs-comment">--对象级权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> dba_tab_privs;<span class="hljs-comment">--所有用户的对象级权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> all_tab_privs;<br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> user_tab_privs;<span class="hljs-comment">--当前用户的对象级权限</span><br><br><span class="hljs-comment">--查询用户拥有的角色</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> dba_role_privs;<span class="hljs-comment">--所有用户的角色</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> user_role_privs;<span class="hljs-comment">--当前用户的角色</span><br><br><span class="hljs-comment">--角色级权限</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> role_sys_privs;<span class="hljs-comment">--查看角色所包含的权限(只能查看登陆用户拥有的角色)</span><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> role_sys_privs a <span class="hljs-keyword">where</span> a.ROLE = <span class="hljs-string">'CONNECT'</span>;<br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> role_sys_privs a <span class="hljs-keyword">where</span> a.ROLE = <span class="hljs-string">'RESOURCE'</span>;<br></code></pre></td></tr></table></figure>


<h1 id="3-角色"><a href="#3-角色" class="headerlink" title="3 角色"></a>3 角色</h1><p>角色（<code>role</code>）是一组权限的集合，将角色赋给一个用户，这个用户就拥有了这个角色中的所有权限。</p>
<h2 id="3-1-系统预定义角色"><a href="#3-1-系统预定义角色" class="headerlink" title="3.1 系统预定义角色"></a>3.1 系统预定义角色</h2><p>预定义角色是在数据库安装后，系统自动创建的一些常用的角色。查询角色所包含的权限可以使用以下语句：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; select * from role_sys_privs where role='RESOURCE';<br></code></pre></td></tr></table></figure>

<ul>
<li><p><code>CONNECT，RESOURCE，DBA</code><br>这些预定义角色主要用于数据库管理。<code>Oracle</code> 建议用户自己设计数据库管理和安全的权限规划，而不要简单的使用这些预定角色。</p>
<ul>
<li><code>DBA</code>：拥有全部特权，是系统最高权限，只有 <code>DBA</code> 才可以创建数据库结构。</li>
<li><code>RESOURCE</code>：<code>RESOURCE</code> 可以创建实体，不可以创建数据库结构。</li>
<li><code>CONNECT</code>：<code>CONNECT</code> 只可以登录 <code>Oracle</code>，不可以创建实体，不可以创建数据库结构。</li>
</ul>
<p>对于普通用户：可以授予 <code>RESOURCE</code>、<code>CONNECT</code> 权限。<br>对于 DBA 用户：授予 <code>RESOURCE</code>、<code>CONNECT</code>、<code>DBA</code> 权限。</p>
</li>
<li><p><code>DELETE_CATALOG_ROLE，EXECUTE_CATALOG_ROLE，SELECT_CATALOG_ROLE</code><br>这些角色主要用于访问数据字典视图和包。</p>
</li>
<li><p><code>EXP_FULL_DATABASE，IMP_FULL_DATABASE</code><br>这两个角色用于数据导入导出工具的使用。</p>
</li>
<li><p><code>AQ_USER_ROLE，AQ_ADMINISTRATOR_ROLE</code><br>这两个角色用于 Oracle 高级查询功能。</p>
</li>
<li><p><code>SNMPAGENT</code><br>用于Oracle enterprise manager 和 Intelligent Agent</p>
</li>
<li><p><code>RECOVERY_CATALOG_OWNER</code><br>用于创建拥有恢复库的用户。</p>
</li>
</ul>
<h2 id="3-2-管理角色"><a href="#3-2-管理角色" class="headerlink" title="3.2 管理角色"></a>3.2 管理角色</h2><h3 id="3-2-1-一般操作"><a href="#3-2-1-一般操作" class="headerlink" title="3.2.1 一般操作"></a>3.2.1 一般操作</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建角色</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">role</span> role_name;<br><br><br><span class="hljs-comment">-- 创建带有口令的角色</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">role</span> class_manager <span class="hljs-keyword">identified</span> <span class="hljs-keyword">by</span> Wgx123456;<br><br>SQL&gt; create role teacher;<br>SQL&gt; create role student;<br><br><br><span class="hljs-comment">-- 为角色授权</span><br>SQL&gt; grant create any table, create procedure to teacher;<br>SQL&gt; grant SELECT ANY TABLE to student;<br><br><br><span class="hljs-comment">-- 授予角色给用户</span><br>SQL&gt; grant teacher to white;<br>SQL&gt; grant student to black;<br><br><br><span class="hljs-comment">-- 查看用户 while 和 black 包含的角色：</span><br>SQL&gt; select * from dba_role_privs where grantee='WHITE';<br>SQL&gt; select * from dba_role_privs where grantee='BLACK';<br><br><br><span class="hljs-comment">-- 查看角色所包含的权限</span><br>SQL&gt; select * from role_sys_privs where ROLE='TEACHER';<br>SQL&gt; select * from role_sys_privs where ROLE='STUDENT';<br></code></pre></td></tr></table></figure>


<h3 id="3-2-2-为角色添加或删除口令"><a href="#3-2-2-为角色添加或删除口令" class="headerlink" title="3.2.2 为角色添加或删除口令"></a>3.2.2 为角色添加或删除口令</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 为角色添加口令</span><br>SQL&gt; alter role teacher identified by Tea123456;<br><br><br><span class="hljs-comment">-- 删除角色的口令</span><br>SQL&gt; alter role teacher not identified;<br></code></pre></td></tr></table></figure>


<h3 id="3-2-3-设置当前用户要生效的角色"><a href="#3-2-3-设置当前用户要生效的角色" class="headerlink" title="3.2.3 设置当前用户要生效的角色"></a>3.2.3 设置当前用户要生效的角色</h3><p>假设 user1 用户有 b1、b2、b3 三个角色，那么如果 b1 未生效，则 b1 所包含的权限对于用户 user1 来讲是不拥有的，只有角色生效了，角色内的权限才作用于用户。最大可生效角色数由参数 <code>MAX_ENABLED_ROLES</code> 设定：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; show parameter  MAX_ENABLED_ROLES<br></code></pre></td></tr></table></figure>

<p>用户登录后，oracle 将所有直接赋给用户的权限和用户默认角色中的权限赋给用户。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; select * from SESSION_ROLES;<br><br>SQL&gt; create user boss identified by Boss123456;<br>SQL&gt; create role manager;<br><br>SQL&gt; grant connect,resource,dba to manager;<br>SQL&gt; grant manager,teacher,student to boss;<br></code></pre></td></tr></table></figure>

<p>使 boss 用户的角色生效：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--设置所有角色失效</span><br>SQL&gt; set role none;<br><br>SQL&gt; select * from session_roles;<br>no rows selected<br><br>使 teacher 生效<br>SQL&gt; set role teacher;<br><br><span class="hljs-comment">--使 connect，student 生效</span><br>SQL&gt; set role student,connect;<br><br><span class="hljs-comment">--使除了 student 外的该用户的所有其它角色生效</span><br>SQL&gt; set role all except student;<br></code></pre></td></tr></table></figure>


<h3 id="3-2-4-默认角色-x2F-删除角色"><a href="#3-2-4-默认角色-x2F-删除角色" class="headerlink" title="3.2.4 默认角色&#x2F;删除角色"></a>3.2.4 默认角色&#x2F;删除角色</h3><p>修改用户，设置其默认角色</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; alter user boss default role teacher;<br></code></pre></td></tr></table></figure>

<p>删除角色<br>角色删除后，原来拥用该角色的用户就不再拥有该角色了，相应的权限也就没有了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL&gt; drop role student;<br>Role dropped.<br></code></pre></td></tr></table></figure>


<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://blog.csdn.net/u012060033/article/details/142731104" target="_blank" rel="noopener">https://blog.csdn.net/u012060033/article/details/142731104</a></li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Oracle/" class="category-chain-item">Oracle</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Oracle/" class="print-no-link">#Oracle</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Oracle 用户、权限、角色</div>
      <div>https://flepeng.github.io/042-Oracle-31-核心概念-Oracle-用户、权限、角色/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Lepeng</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年4月1日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/042-Oracle-31-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-Oracle-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/" title="Oracle 数据字典">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Oracle 数据字典</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/042-Oracle-22-%E5%91%BD%E4%BB%A4-Oracle-DDL/" title="Oracle DDL">
                        <span class="hidden-mobile">Oracle DDL</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"flepeng/hexo-blog-comment","repo-id":"R_kgDOL0qaig","category":"Announcements","category-id":"DIC_kwDOL0qais4CfBIv","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
