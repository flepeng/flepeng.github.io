

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2488174175014870" crossorigin="anonymous"></script><!-- google 广告 -->
  <meta name="google-site-verification" content="40lMg4eqLLbXoDcpN3h-cEnfmselbQ8tUzNvuC0IRIs" /><!-- google 站点认证 -->
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Lepeng">
  <meta name="keywords" content="">
  
    <meta name="description" content="官方网站  https:&#x2F;&#x2F;docs.oracle.com&#x2F;javacomponents&#x2F;jrockit-hotspot&#x2F;migration-guide&#x2F;cloptions.htm#JRHMG127 https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;technotes&#x2F;tools&#x2F;unix&#x2F;java.html#BGBCIEFC  介绍java启动参数共分为三类；    标">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM 启动参数大全">
<meta property="og:url" content="https://flepeng.github.io/021-Java-42-JVM-JVM-%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E5%A4%A7%E5%85%A8/index.html">
<meta property="og:site_name" content="Lepeng">
<meta property="og:description" content="官方网站  https:&#x2F;&#x2F;docs.oracle.com&#x2F;javacomponents&#x2F;jrockit-hotspot&#x2F;migration-guide&#x2F;cloptions.htm#JRHMG127 https:&#x2F;&#x2F;docs.oracle.com&#x2F;javase&#x2F;8&#x2F;docs&#x2F;technotes&#x2F;tools&#x2F;unix&#x2F;java.html#BGBCIEFC  介绍java启动参数共分为三类；    标">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-18T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-03T10:25:30.312Z">
<meta property="article:author" content="Feng Lepeng">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>JVM 启动参数大全 - Lepeng</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"flepeng.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"f3d259b9efd9ce8655c180fd01bf0045","google":{"measurement_id":"G-LFTE4C7W3W"},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?f3d259b9efd9ce8655c180fd01bf0045";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-LFTE4C7W3W", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-LFTE4C7W3W');
        });
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Lepeng 的 blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="JVM 启动参数大全"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-04-19 00:00" pubdate>
          2024年4月19日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          43 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">JVM 启动参数大全</h1>
            
            
              <div class="markdown-body">
                
                <p>官方网站</p>
<ul>
<li><a href="https://docs.oracle.com/javacomponents/jrockit-hotspot/migration-guide/cloptions.htm#JRHMG127" target="_blank" rel="noopener">https://docs.oracle.com/javacomponents/jrockit-hotspot/migration-guide/cloptions.htm#JRHMG127</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html#BGBCIEFC" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html#BGBCIEFC</a></li>
</ul>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>java启动参数共分为三类；  </p>
<ul>
<li><strong>标准参数</strong>（-），所有的JVM实现都必须实现这些参数的功能，而且向后兼容；  </li>
<li><strong>非标准参数</strong>（-X），默认jvm实现这些参数的功能，但是并不保证所有jvm实现都满足，且不保证向后兼容；  </li>
<li><strong>非Stable参数</strong>（-XX），此类参数各个jvm实现会有所不同，将来可能会随时取消，需要慎重使用；</li>
</ul>
<h1 id="标准参数"><a href="#标准参数" class="headerlink" title="标准参数"></a>标准参数</h1><p>标准参数是用过Java的人都最熟悉的，就是你在运行java命令时后面加上的参数，如 <code>java -version, java -jar</code> 等，输入命令 <code>java -help</code> 或 <code>java -?</code> 就能获得当前机器所有java的标准参数列表。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&gt;java -help<br><br>用法: java [-options] class [args<span class="hljs-built_in">..</span>.]<br>           (执行类)<br>   或  java [-options] -jar jarfile [args<span class="hljs-built_in">..</span>.]<br>           (执行 jar 文件)<br><br>其中选项包括:<br>-client | -server<br>    可以通过-server或-client设置jvm的运行参数。它们的区别是<br>    *  <span class="hljs-built_in"> Server </span>VM的初始堆空间会大一些，默认使用的是并行垃圾回收器，启动慢运行快。运行时性能和内存管理效率很高，适用于生产环境。<br>    *  <span class="hljs-built_in"> Client </span>VM相对来讲会保守一些，初始堆空间会小一些，使用串行的垃圾回收器，它的目标是为了让JVM的启动速度更快，但运行速度会比Serverm模式慢些。运行时性能和内存管理效率不高，通常用于客户端应用程序或者PC应用开发和调试。<br><br>    JVM在启动的时候会根据硬件和操作系统自动选择使用Server还是Client类型的JVM。<br>    *   32位操作系统<br>        *   如果是Windows系统，不论硬件配置如何，都默认使用Client类型的JVM。<br>        *   如果是其他操作系统上，机器配置有2GB以上的内存同时有2个以上CPU的话默认使用server模式，否则使用client模式。<br>    *   64位操作系统<br>        *   只有server类型，不支持client类型。<br>    <br>    不同的启动模式，执行GC的方式有所区别：<br>        启动模式 | 新生代GC方式 | 旧生代和持久代GC的方式<br>        -------- | ------------ | ----------------------<br>       <span class="hljs-built_in"> client </span>  | 串行         | 串行<br>       <span class="hljs-built_in"> server </span>  | 并行         | 并发<br>    <br>-agentlib:libname[=options]<br>    用于装载本地lib包；<br>    其中libname为本地代理库文件名，默认搜索路径为环境变量PATH中的路径，options为传给本地库启动时的参数，多个参数之间用逗号分隔。在Windows平台上jvm搜索本地库名为libname.dll的文件，在linux上jvm搜索本地库名为libname.so的文件，搜索路径环境变量在不同系统上有所不同，比如Solaries上就默认搜索LD_LIBRARY_PATH。<br>    比如：-agentlib:hprof 用来获取jvm的运行情况，包括CPU、内存、线程等的运行数据，并可输出到指定文件中；windows中搜索路径为JRE_HOME/bin/hprof.dll。<br><br>-agentpath:pathname[=options]<br>    按全路径装载本地库，不再搜索PATH中的路径；其他功能和agentlib相同；更多的信息待续，在后续的JVMTI部分会详述。<br><br>-classpath classpath<br>-cp classpath<br>    JVM加载和搜索文件的目录路径，多个路径用;分隔；注意，使用-classpath后jvm将不再使用CLASSPATH中的类搜索路径，如果-classpath和CLASSPATH都没有设置，则jvm使用当前路径(.)作为类搜索路径。<br>    jvm搜索类的方式和顺序为：Bootstrap，Extension，User。<br>    *   Bootstrap中的路径是jvm自带的jar或zip文件，jvm首先搜索这些包文件，用System.getProperty(<span class="hljs-string">"sun.boot.class.path"</span>)可得到搜索路径。<br>    *   Extension是位于JRE_HOME/lib/ext目录下的jar文件，jvm在搜索完Bootstrap后就搜索该目录下的jar文件，用System.getProperty(<span class="hljs-string">"java.ext.dirs"</span>)可得到搜索路径。<br>    *   User搜索顺序为当前路径.、CLASSPATH、-classpath，jvm最后搜索这些目录，用System.getProperty(<span class="hljs-string">"java.class.path"</span>)可得到搜索路径。<br><br><span class="hljs-attribute">-Dproperty</span>=value<br>    设置系统属性名/值对，运行在此jvm之上的应用程序可用System.getProperty(<span class="hljs-string">"property"</span>)得到value的值。<br>    如果value中有空格，则需要用双引号将该值括起来，如<span class="hljs-attribute">-Dname</span>=<span class="hljs-string">"space string"</span>。<br>    该参数通常用于设置系统级全局变量值，如配置文件路径，以便该属性在程序中任何地方都可访问。<br><br>-enableassertions[:&lt;package name&gt;<span class="hljs-string">"..."</span> | :&lt;class name&gt; ]<br>-ea[:&lt;package name&gt;<span class="hljs-string">"..."</span> | :&lt;class name&gt; ]<br>    上述参数就用来设置jvm是否启动断言机制（从JDK 1.4开始支持），缺省时jvm关闭断言机制。<br>    用-ea 可打开断言机制，不加&lt;packagename&gt;和classname时运行所有包和类中的断言，如果希望只运行某些包或类中的断言，可将包名或类名加到-ea之后。例如要启动包com.wombat.fruitbat中的断言，可用命令java -ea:com.wombat.fruitbat<span class="hljs-built_in">..</span>.&lt;Main Class&gt;。<br><br>-disableassertions[:&lt;package name&gt;<span class="hljs-string">"..."</span> | :&lt;class ; ]<br>-da[:&lt;package name&gt;<span class="hljs-string">"..."</span> | :&lt;class name&gt; ]<br>    用来设置jvm关闭断言处理，packagename和classname的使用方法和-ea相同，jvm默认就是关闭状态。<br>    该参数一般用于相同package内某些class不需要断言的场景，比如com.wombat.fruitbat需要断言，但是com.wombat.fruitbat.Brickbat该类不需要，则可以如下运行：<br>    java -ea:com.wombat.fruitbat<span class="hljs-built_in">..</span>.-da:com.wombat.fruitbat.Brickbat &lt;Main Class&gt;。<br> <br>-enablesystemassertions<br>-esa<br>    激活系统类的断言。<br> <br>-disablesystemassertions<br>-dsa<br>    关闭系统类的断言。<br><br>-jar<br>    指定以jar包的形式执行一个应用程序。<br>    要这样执行一个应用程序，必须让jar包的manifest文件中声明初始加载的Main-class，当然那Main-class必须有public static void main(String[] args)方法。<br><br>-javaagent:jarpath[=options]<br>    指定jvm启动时装入java语言设备代理。<br>    Jarpath文件中的mainfest文件必须有Agent-Class属性。代理类也必须实现公共的静态public static void premain(String agentArgs, Instrumentation inst)方法（和main方法类似）。当jvm初始化时，将按代理类的说明顺序调用premain方法；具体参见java.lang.instrument软件包的描述。<br><br>-verbose<br>    这是查询GC问题最常用的命令之一，具体参数如：<br>    -verbose:class  输出jvm载入类的相关信息，当jvm报告说找不到类或者类冲突时可此进行诊断。<br>    -verbose:gc 输出每次GC的相关情况。<br>    -verbose:jni 输出native方法调用的相关情况，一般用于诊断jni调用错误信息。<br> <br>-version<br>    输出java的版本信息，比如jdk版本、vendor、model。<br>    -version:release<br>        指定class或者jar运行时需要的jdk版本信息；若指定版本未找到，则以能找到的系统默认jdk版本执行；一般情况下，对于jar文件，可以在manifest文件中指定需要的版本信息，而不是在命令行。<br>        release中可以指定单个版本，也可以指定一个列表，中间用空格隔开，且支持复杂组合，比如：<br>    -version:<span class="hljs-string">"1.5.0_04 1.5*&amp;1.5.1_02+"</span><br>    指定class或者jar需要jdk版本为1.5.0_04或者是1.5系列中比1.5.1_02更高的所有版本。<br><br>-showversion<br>    输出java版本信息（与-version相同）之后，继续输出java的标准参数列表及其描述。<br> <br>-?<br>-help<br>    输出java标准参数列表及其描述。<br></code></pre></td></tr></table></figure>



<h1 id="非标准参数-又称为扩展参数"><a href="#非标准参数-又称为扩展参数" class="headerlink" title="非标准参数(又称为扩展参数)"></a>非标准参数(又称为扩展参数)</h1><p>非标准参数，是在标准参数的基础上进行扩展的参数，输入“<code>java -X</code>”命令，能够获得当前JVM支持的所有非标准参数列表。</p>
<p>在不同类型的JVM中，采用的参数有所不同</p>
<pre><code class="hljs">-Xint
    设置jvm以解释模式运行，所有的字节码将被直接执行，而不会编译成本地码。
-Xcomp
    它（-Xint）正好相反，JVM在第一次使用时会把所有的字节码编译成本地代码，从而带来最大程度的优化。
    然而，很多应用在使用-Xcomp也会有一些性能损失，当然这比使用-Xint损失的少，原因是-xcomp没有让JVM启用JIT编译器的全部功能。JIT编译器可以对是否需要编译做判断，如果所有代码都进行编译的话，对于一些只执行一次的代码就没有意义了。
-Xmixed
    混合模式，将解释模式与编译模式进行混合使用，由jvm自己决定，这是jvm默认的模式，也是推荐使用的模式。
 
-Xbatch
    关闭后台代码编译，强制在前台编译，编译完成之后才能进行代码执行；默认情况下，jvm在后台进行编译，若没有编译完成，则前台运行代码时以解释模式运行。

-Xmn
    新生代内存大小，包括E区和两个S区的总和，使用方法如：-Xmn65535，-Xmn1024k，-Xmn512m，-Xmn1g (-Xms,-Xmx也是种写法)

-Xms&lt;size&gt; 重要
    指定jvm堆的初始大小，也是堆大小的最小值，默认值是总共的物理内存/64（且小于1G），最小为1M，可以指定单位，比如k、m，若不指定，则默认为字节。默认情况下，当堆中可用内存小于40%(这个值可以用-XX: MinHeapFreeRatio 调整，如-X:MinHeapFreeRatio=30)时，堆内存会开始增加，一直增加到-Xmx的大小；

-Xmx&lt;size&gt; 重要
    指定jvm堆的最大值，默认值是总共的物理内存/4或者1G，最小为2M，如果Xms和Xmx都不设置，则两者大小会相同，默认情况下，当堆中可用内存大于70%（这个值可以用-XX: MaxHeapFreeRatio 调整，如-X:MaxHeapFreeRatio=60）时，堆内存会开始减少，一直减小到-Xms的大小；
    整个堆的大小=年轻代大小+年老代大小，堆的大小不包含持久代大小，如果增大了年轻代，年老代相应就会减小，官方默认的配置为年老代大小/年轻代大小=2/1左右（使用-XX:NewRatio可以设置-XX:NewRatio=5，表示年老代/年轻代=5/1）；
    建议在开发测试环境可以用Xms和Xmx分别设置最小值最大值，但是在线上生产环境，Xms和Xmx设置的值必须一样，原因与年轻代一样——防止抖动；

-Xss&lt;size&gt;
    这个参数用于设置每个线程的栈内存，默认1M
 
-Xbootclasspath:bootclasspath
    让jvm从指定路径（可以是分号分隔的目录、jar、或者zip）中加载bootclass，用来替换jdk的rt.jar；若非必要，一般不会用到； 
    -Xbootclasspath/a:path
        将指定路径的所有文件追加到默认bootstrap路径中；
    -Xbootclasspath/p:path
        让jvm优先于bootstrap默认路径加载指定路径的所有文件；
 
-Xcheck:jni
     对JNI函数进行附加check；此时jvm将校验传递给JNI函数参数的合法性，在本地代码中遇到非法数据时，jmv将报一个致命错误而终止；使用该参数后将造成性能下降，请慎用。
 
-Xfuture
    让jvm对类文件执行严格的格式检查（默认jvm不进行严格格式检查），以符合类文件格式规范，推荐开发人员使用该参数。
 
-Xnoclassgc
    关闭针对class的gc功能；因为其阻止内存回收，所以可能会导致OutOfMemoryError错误，慎用；
 
-Xincgc
    开启增量gc（默认为关闭）；这有助于减少长时间GC时应用程序出现的停顿；但由于可能和应用程序并发执行，所以会降低CPU对应用的处理能力。
 
-Xloggc:file
    与-verbose:gc功能类似，只是将每次GC事件的相关情况记录到一个文件中，文件的位置最好在本地，以避免网络的潜在问题。
    若与verbose命令同时出现在命令行中，则以-Xloggc为准。
 
-Xprof
    跟踪正运行的程序，并将跟踪数据在标准输出输出；适合于开发环境调试。
 
-Xrs
    减少jvm对操作系统信号（signals）的使用，该参数从1.3.1开始有效；
    从jdk1.3.0开始，jvm允许程序在关闭之前还可以执行一些代码（比如关闭数据库的连接池），即使jvm被突然终止；
    jvm关闭工具通过监控控制台的相关事件而满足以上的功能；更确切的说，通知在关闭工具执行之前，先注册控制台的控制handler，然后对CTRL_C_EVENT, CTRL_CLOSE_EVENT, CTRL_LOGOFF_EVENT, and CTRL_SHUTDOWN_EVENT这几类事件直接返回true。
    但如果jvm以服务的形式在后台运行（比如servlet引擎），他能接收CTRL_LOGOFF_EVENT事件，但此时并不需要初始化关闭程序；为了避免类似冲突的再次出现，从jdk1.3.1开始提供-Xrs参数；当此参数被设置之后，jvm将不接收控制台的控制handler，也就是说他不监控和处理CTRL_C_EVENT, CTRL_CLOSE_EVENT, CTRL_LOGOFF_EVENT, or CTRL_SHUTDOWN_EVENT事件。
</code></pre>
<p>上面这些参数中，比如 <code>-Xms、-Xmx</code> 都是我们性能优化中很重要的参数；<code>-Xprof、-Xloggc:file</code> 等都是在没有专业跟踪工具情况下排错的好手；  </p>
<h1 id="XX表示的非Stable参数"><a href="#XX表示的非Stable参数" class="headerlink" title="-XX表示的非Stable参数"></a>-XX表示的非Stable参数</h1><p>用-XX作为前缀的参数列表在 JVM 中可能是不健壮的，SUN 也不推荐使用，后续可能会在没有通知的情况下就直接取消了；但是由于这些参数中的确有很多是对我们很有用的，比如我们经常会见到的<code>-XX:PermSize、-XX:MaxPermSize</code>等等。</p>
<p>以 -XX 表示的非 Stable 参数， JVM（Hotspot）中主要的参数可以大致分为3类</p>
<ul>
<li>性能参数（Performance Options）：用于JVM的性能调优和内存分配控制，如初始化内存大小的设置；</li>
<li>行为参数（Behavioral Options）：用于改变JVM的基础行为，如GC的方式和算法的选择；</li>
<li>调试参数（Debugging Options）：用于监控、打印、输出等jvm参数，用于显示jvm更加详细的信息；</li>
</ul>
<p>对于非Stable参数，使用方法有4种：</p>
<ul>
<li><code>-XX:+&lt;option&gt;</code> 启用选项</li>
<li><code>-XX:-&lt;option&gt;</code> 不启用选项</li>
<li><code>-XX:&lt;option&gt;=&lt;number&gt;</code> 给选项设置一个数字类型值，可跟单位，例如 32k, 1024m, 2g</li>
<li><code>-XX:&lt;option&gt;=&lt;string&gt;</code> 给选项设置一个字符串值，例如-XX:HeapDumpPath&#x3D;.&#x2F;dump.core</li>
</ul>
<h2 id="性能参数"><a href="#性能参数" class="headerlink" title="性能参数"></a>性能参数</h2><p>性能参数往往用来定义内存分配的大小和比例，相比于行为参数和调试参数，一个比较明显的区别是性能参数后面往往跟的有数值，常用如下：</p>
<table>
<thead>
<tr>
<th>参数及其默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>-XX:NewSize=2.125m</code></td>
<td>新生代对象生成时占用内存的默认值</td>
</tr>
<tr>
<td><code>-XX:MaxNewSize=size</code></td>
<td>新生成对象能占用内存的最大值</td>
</tr>
<tr>
<td><code>-XX:MaxPermSize=64m</code></td>
<td>方法区所能占用的最大内存（非堆内存）</td>
</tr>
<tr>
<td><code>-XX:PermSize=64m</code></td>
<td>方法区分配的初始内存</td>
</tr>
<tr>
<td><code>-XX:MaxTenuringThreshold=15</code></td>
<td>对象在新生代存活区切换的次数（坚持过MinorGC的次数，每坚持过一次，该值就增加1），大于该值会进入老年代(年龄阈值)</td>
</tr>
<tr>
<td><code>-XX:MaxHeapFreeRatio=70</code></td>
<td>GC后java堆中空闲量占的最大比例，大于该值，则堆内存会减少</td>
</tr>
<tr>
<td><code>-XX:MinHeapFreeRatio=40</code></td>
<td>GC后java堆中空闲量占的最小比例，小于该值，则堆内存会增加</td>
</tr>
<tr>
<td><code>-XX:NewRatio=2</code></td>
<td>新生代内存容量与老生代内存容量的比例</td>
</tr>
<tr>
<td><code>-XX:ReservedCodeCacheSize= 32m</code></td>
<td>保留代码占用的内存容量</td>
</tr>
<tr>
<td><code>-XX:ThreadStackSize=512</code></td>
<td>设置线程栈大小，若为0则使用系统默认值</td>
</tr>
<tr>
<td><code>-XX:LargePageSizeInBytes=4m</code></td>
<td>设置用于Java堆的大页面尺寸</td>
</tr>
<tr>
<td><code>-XX:PretenureSizeThreshold= size</code></td>
<td>大于该值的对象直接晋升入老年代（这种对象少用为好）</td>
</tr>
<tr>
<td><code>-XX:SurvivorRatio=8</code></td>
<td>Eden区域Survivor区的容量比值，如默认值为8，代表Eden：Survivor1：Survivor2&#x3D;8:1:1</td>
</tr>
</tbody></table>
<h2 id="行为参数"><a href="#行为参数" class="headerlink" title="行为参数"></a>行为参数</h2><p>行为参数主要用来选择使用什么样的垃圾收集器组合，以及控制运行过程中的GC策略等</p>
<table>
<thead>
<tr>
<th>参数及其默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>-XX:+UseSerialGC</code></td>
<td>启用串行GC，即采用Serial+Serial Old模式</td>
</tr>
<tr>
<td><code>-XX:+UseParallelGC</code></td>
<td>启用并行GC，即采用Parallel Scavenge+Serial Old收集器组合（-Server模式下的默认组合）</td>
</tr>
<tr>
<td><code>-XX:GCTimeRatio=99</code></td>
<td>设置用户执行时间占总时间的比例（默认值99，即1%的时间用于GC）</td>
</tr>
<tr>
<td><code>-XX:MaxGCPauseMillis=time</code></td>
<td>设置GC的最大停顿时间（这个参数只对Parallel Scavenge有效）</td>
</tr>
<tr>
<td><code>-XX:+UseParNewGC</code></td>
<td>使用ParNew+Serial Old收集器组合</td>
</tr>
<tr>
<td><code>-XX:ParallelGCThreads</code></td>
<td>设置执行内存回收的线程数，在+UseParNewGC的情况下使用</td>
</tr>
<tr>
<td><code>-XX:+UseParallelOldGC</code></td>
<td>使用Parallel Scavenge +Parallel Old组合收集器</td>
</tr>
<tr>
<td><code>-XX:+UseConcMarkSweepGC</code></td>
<td>使用ParNew+CMS+Serial Old组合并发收集，优先使用ParNew+CMS，当用户线程内存不足时，采用备用方案Serial Old收集。</td>
</tr>
<tr>
<td><code>-XX:-DisableExplicitGC</code></td>
<td>禁止调用System.gc()；但jvm的gc仍然有效</td>
</tr>
<tr>
<td><code>-XX:+ScavengeBeforeFullGC</code></td>
<td>新生代GC优先于Full GC执行</td>
</tr>
</tbody></table>
<p>上面表格中黑体的<code>-XX:+UseSerialGC</code>、<code>-XX:+UseParallelGC</code> 、<code>-XX:+UseConcMarkSweepGC</code> 代表着jvm中GC执行的三种方式，即<strong>串行、并行、并发</strong></p>
<ul>
<li>串行（SerialGC）是jvm的默认GC方式，一般适用于小型应用和单处理器，算法比较简单，GC效率也较高，但可能会给应用带来停顿；  </li>
<li>并行（ParallelGC）是指GC运行时，对应用程序运行没有影响，GC和app两者的线程在并发执行，这样可以最大限度不影响app的运行；  </li>
<li>并发（ConcMarkSweepGC）是指多个线程并发执行GC，一般适用于多处理器系统中，可以提高GC的效率，但算法复杂，系统消耗较大；</li>
</ul>
<h2 id="调试参数"><a href="#调试参数" class="headerlink" title="调试参数"></a>调试参数</h2><p>调试参数，主要用于监控和打印GC的信息</p>
<table>
<thead>
<tr>
<th>参数及其默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>-XX:-CITime</code></td>
<td>打印消耗在JIT编译的时间</td>
</tr>
<tr>
<td><code>-XX:ErrorFile=./hs_err_pid&lt;pid&gt;.log</code></td>
<td>保存错误日志或者数据到文件中</td>
</tr>
<tr>
<td><code>-XX:-ExtendedDTraceProbes</code></td>
<td>开启solaris特有的dtrace探针</td>
</tr>
<tr>
<td><code>-XX:HeapDumpPath=./java_pid&lt;pid&gt;.hprof</code></td>
<td>指定导出堆信息时的路径或文件名</td>
</tr>
<tr>
<td><code>-XX:-HeapDumpOnOutOfMemoryError</code></td>
<td>当首次遭遇OOM时导出此时堆中相关信息</td>
</tr>
<tr>
<td><code>-XX:OnError=&quot;&lt;cmd args&gt;;&lt;cmd args&gt;&quot;</code></td>
<td>出现致命ERROR之后运行自定义命令</td>
</tr>
<tr>
<td><code>-XX:OnOutOfMemoryError=&quot;&lt;cmd args&gt;;&lt;cmd args&gt;&quot;</code></td>
<td>当首次遭遇OOM时执行自定义命令</td>
</tr>
<tr>
<td><code>-XX:-PrintClassHistogram</code></td>
<td>遇到Ctrl-Break后打印类实例的柱状信息，与jmap -histo功能相同</td>
</tr>
<tr>
<td><code>-XX:-PrintConcurrentLocks</code></td>
<td>遇到Ctrl-Break后打印并发锁的相关信息，与jstack -l功能相同</td>
</tr>
<tr>
<td><code>-XX:-PrintCommandLineFlags</code></td>
<td>打印在命令行中出现过的标记</td>
</tr>
<tr>
<td><code>-XX:-PrintCompilation</code></td>
<td>当一个方法被编译时打印相关信息</td>
</tr>
<tr>
<td><code>-XX:-PrintGC</code></td>
<td>每次GC时打印相关信息</td>
</tr>
<tr>
<td><code>-XX:-PrintGC Details</code></td>
<td>每次GC时打印详细信息</td>
</tr>
<tr>
<td><code>-XX:-PrintGCTimeStamps</code></td>
<td>打印每次GC的时间戳</td>
</tr>
<tr>
<td><code>-XX:-TraceClassLoading</code></td>
<td>跟踪类的加载信息</td>
</tr>
<tr>
<td><code>-XX:-TraceClassLoadingPreorder</code></td>
<td>跟踪被引用到的所有类的加载信息</td>
</tr>
<tr>
<td><code>-XX:-TraceClassResolution</code></td>
<td>跟踪常量池</td>
</tr>
<tr>
<td><code>-XX:-TraceClassUnloading</code></td>
<td>跟踪类的卸载信息</td>
</tr>
<tr>
<td><code>-XX:-TraceLoaderConstraints</code></td>
<td>跟踪类加载器约束的相关信息</td>
</tr>
</tbody></table>
<p>上面表格中黑体的三个参数代表着jvm中GC执行的三种方式，即<strong>串行、并行、并发</strong>；<br>串行<strong>（SerialGC）</strong>是jvm的默认GC方式，一般适用于小型应用和单处理器，算法比较简单，GC效率也较高，但可能会给应用带来停顿；<br>并行<strong>（ParallelGC）</strong>是指GC运行时，对应用程序运行没有影响，GC和app两者的线程在并发执行，这样可以最大限度不影响app的运行；<br>并发<strong>（ConcMarkSweepGC）</strong>是指多个线程并发执行GC，一般适用于多处理器系统中，可以提高GC的效率，但算法复杂，系统消耗较大；</p>
<h1 id="设置这些参数的一些心得"><a href="#设置这些参数的一些心得" class="headerlink" title="设置这些参数的一些心得"></a>设置这些参数的一些心得</h1><ol>
<li>Oracle 官方推荐堆的初始化大小与堆可设置的最大值一般是相等的，即<code>Xms = Xmx</code>，因为起始堆内存太小（Xms），会导致启动初期频繁 GC，起始堆内存较大（Xmx）有助于减少 GC 次数</li>
<li>调试的时候设置一些打印参数，如<code>-XX:+PrintClassHistogram -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintHeapAtGC -Xloggc:log/gc.log</code>，这样可以从 gc.log 里看出一些端倪出来</li>
<li>系统停顿时间过长可能是 GC 的问题也可能是程序的问题，多用 jmap 和 jstack 查看，或者 killall -3 Java，然后查看 Java 控制台日志，能看出很多问题</li>
<li>采用并发回收时，年轻代小一点，年老代要大，因为年老大用的是并发回收，即使时间长点也不会影响其他程序继续运行，网站不会停顿</li>
<li>仔细了解自己的应用，如果用了缓存，那么年老代应该大一些，缓存的 HashMap 不应该无限制长，建议采用 LRU 算法的 Map 做缓存，LRUMap 的最大长度也要根据实际情况设定</li>
</ol>
<p>要设置好各种 JVM 参数，还可以对 server 进行压测， 预估自己的业务量，设定好一些 JVM 参数进行压测看下这些设置好的 JVM 参数是否能满足要求</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/" class="print-no-link">#Java</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>JVM 启动参数大全</div>
      <div>https://flepeng.github.io/021-Java-42-JVM-JVM-启动参数大全/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Lepeng</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年4月19日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/021-Java-42-JVM-JVM-%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE/" title="JVM 参数设置">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JVM 参数设置</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/021-Java-42-JVM-JVM-%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81/" title="JVM 线程状态">
                        <span class="hidden-mobile">JVM 线程状态</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"flepeng/hexo-blog-comment","repo-id":"R_kgDOL0qaig","category":"Announcements","category-id":"DIC_kwDOL0qais4CfBIv","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
